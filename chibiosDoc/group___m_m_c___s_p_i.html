<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>ChibiOS/HAL: MMC over SPI Driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ChibiOS/HAL
   &#160;<span id="projectnumber">6.0.0</span>
<script type="text/javascript"><!--
google_ad_client = "pub-3840594581853944";
/* Documentation, bottom, 728x90, created 9/19/10 */
google_ad_slot = "1902290615";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___m_m_c___s_p_i.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">MMC over SPI Driver<div class="ingroups"><a class="el" href="group___i_o.html">HAL</a> &raquo; <a class="el" href="group___h_a_l___c_o_m_p_l_e_x___d_r_i_v_e_r_s.html">Complex Drivers</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Generic MMC driver.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for MMC over SPI Driver:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group___m_m_c___s_p_i.png" border="0" alt="" usemap="#group______m__m__c______s__p__i"/>
<map name="group______m__m__c______s__p__i" id="group______m__m__c______s__p__i">
<area shape="rect" id="node2" href="group___h_a_l___c_o_m_p_l_e_x___d_r_i_v_e_r_s.html" title="HAL Complex Drivers. " alt="" coords="5,5,107,29"/>
</map>
</td></tr></table></center>
</div>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Generic MMC driver. </p>
<p>This module implements a portable MMC/SD driver that uses a SPI driver as physical layer. Hot plugging and removal are supported through kernel events. </p><dl class="section pre"><dt>Precondition</dt><dd>In order to use the MMC_SPI driver the <code>HAL_USE_MMC_SPI</code> and <code>HAL_USE_SPI</code> options must be enabled in <code>halconf.h</code>.</dd></dl>
<h1><a class="anchor" id="mmc_spi_1"></a>
Driver State Machine</h1>
<p>This driver implements a state machine internally, see the <a class="el" href="group___i_o___b_l_o_c_k.html">Abstract I/O Block Device</a> module documentation for details.</p>
<h1><a class="anchor" id="mmc_spi_2"></a>
Driver Operations</h1>
<p>This driver allows to read or write single or multiple 512 bytes blocks on a SD Card. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga3ce5d5a8b1c316f4409e347efb1751fd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_m_c___s_p_i.html#ga3ce5d5a8b1c316f4409e347efb1751fd">_mmc_driver_methods</a>&#160;&#160;&#160;<a class="el" href="group___m_m_c_s_d.html#gaa897927013f0374d8c46c9fdc145e74e">_mmcsd_block_device_methods</a></td></tr>
<tr class="memdesc:ga3ce5d5a8b1c316f4409e347efb1751fd"><td class="mdescLeft">&#160;</td><td class="mdescRight"><code><a class="el" href="struct_m_m_c_driver.html" title="Structure representing a MMC/SD over SPI driver. ">MMCDriver</a></code> specific methods.  <a href="#ga3ce5d5a8b1c316f4409e347efb1751fd">More...</a><br /></td></tr>
<tr class="separator:ga3ce5d5a8b1c316f4409e347efb1751fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
MMC_SPI configuration options</h2></td></tr>
<tr class="memitem:ga3087dfffa81dd8a0a80ee92746e65fe2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_m_c___s_p_i.html#ga3087dfffa81dd8a0a80ee92746e65fe2">MMC_NICE_WAITING</a>&#160;&#160;&#160;TRUE</td></tr>
<tr class="memdesc:ga3087dfffa81dd8a0a80ee92746e65fe2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delays insertions.  <a href="#ga3087dfffa81dd8a0a80ee92746e65fe2">More...</a><br /></td></tr>
<tr class="separator:ga3087dfffa81dd8a0a80ee92746e65fe2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Macro Functions</h2></td></tr>
<tr class="memitem:ga74f43ee544666e67441dd9e4b6b11c8a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_m_c___s_p_i.html#ga74f43ee544666e67441dd9e4b6b11c8a">mmcIsCardInserted</a>(mmcp)&#160;&#160;&#160;mmc_lld_is_card_inserted(mmcp)</td></tr>
<tr class="memdesc:ga74f43ee544666e67441dd9e4b6b11c8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the card insertion status.  <a href="#ga74f43ee544666e67441dd9e4b6b11c8a">More...</a><br /></td></tr>
<tr class="separator:ga74f43ee544666e67441dd9e4b6b11c8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2f69ba255b397f2d5f09cf1fe26a953f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_m_c___s_p_i.html#ga2f69ba255b397f2d5f09cf1fe26a953f">mmcIsWriteProtected</a>(mmcp)&#160;&#160;&#160;mmc_lld_is_write_protected(mmcp)</td></tr>
<tr class="memdesc:ga2f69ba255b397f2d5f09cf1fe26a953f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the write protect status.  <a href="#ga2f69ba255b397f2d5f09cf1fe26a953f">More...</a><br /></td></tr>
<tr class="separator:ga2f69ba255b397f2d5f09cf1fe26a953f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_m_m_c_config.html">MMCConfig</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">MMC/SD over SPI driver configuration structure.  <a href="struct_m_m_c_config.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_m_m_c_driver_v_m_t.html">MMCDriverVMT</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><code><a class="el" href="struct_m_m_c_driver.html" title="Structure representing a MMC/SD over SPI driver. ">MMCDriver</a></code> virtual methods table.  <a href="struct_m_m_c_driver_v_m_t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_m_m_c_driver.html">MMCDriver</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure representing a MMC/SD over SPI driver.  <a href="struct_m_m_c_driver.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gac82b7e209601c890c0d1587cefaf0813"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_m_c___s_p_i.html#gac82b7e209601c890c0d1587cefaf0813">crc7</a> (uint8_t crc, const uint8_t *buffer, size_t len)</td></tr>
<tr class="memdesc:gac82b7e209601c890c0d1587cefaf0813"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the MMC standard CRC-7 based on a lookup table.  <a href="#gac82b7e209601c890c0d1587cefaf0813">More...</a><br /></td></tr>
<tr class="separator:gac82b7e209601c890c0d1587cefaf0813"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2047c3d4f7ce72dcb6c4942f57e92600"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_m_c___s_p_i.html#ga2047c3d4f7ce72dcb6c4942f57e92600">wait</a> (<a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *mmcp)</td></tr>
<tr class="memdesc:ga2047c3d4f7ce72dcb6c4942f57e92600"><td class="mdescLeft">&#160;</td><td class="mdescRight">Waits an idle condition.  <a href="#ga2047c3d4f7ce72dcb6c4942f57e92600">More...</a><br /></td></tr>
<tr class="separator:ga2047c3d4f7ce72dcb6c4942f57e92600"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9e3bc1849600a89d28eac5aaa8e5ea14"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_m_c___s_p_i.html#ga9e3bc1849600a89d28eac5aaa8e5ea14">send_hdr</a> (<a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *mmcp, uint8_t cmd, uint32_t arg)</td></tr>
<tr class="memdesc:ga9e3bc1849600a89d28eac5aaa8e5ea14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a command header.  <a href="#ga9e3bc1849600a89d28eac5aaa8e5ea14">More...</a><br /></td></tr>
<tr class="separator:ga9e3bc1849600a89d28eac5aaa8e5ea14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3862a084e567aa0e36d86038f504b7b5"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_m_c___s_p_i.html#ga3862a084e567aa0e36d86038f504b7b5">recvr1</a> (<a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *mmcp)</td></tr>
<tr class="memdesc:ga3862a084e567aa0e36d86038f504b7b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receives a single byte response.  <a href="#ga3862a084e567aa0e36d86038f504b7b5">More...</a><br /></td></tr>
<tr class="separator:ga3862a084e567aa0e36d86038f504b7b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadcc5410f945c25c65643294faa56df48"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_m_c___s_p_i.html#gadcc5410f945c25c65643294faa56df48">recvr3</a> (<a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *mmcp, uint8_t *buffer)</td></tr>
<tr class="memdesc:gadcc5410f945c25c65643294faa56df48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receives a three byte response.  <a href="#gadcc5410f945c25c65643294faa56df48">More...</a><br /></td></tr>
<tr class="separator:gadcc5410f945c25c65643294faa56df48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf83dd60ca0bc01e456d965724b3f4a5a"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_m_c___s_p_i.html#gaf83dd60ca0bc01e456d965724b3f4a5a">send_command_R1</a> (<a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *mmcp, uint8_t cmd, uint32_t arg)</td></tr>
<tr class="memdesc:gaf83dd60ca0bc01e456d965724b3f4a5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a command an returns a single byte response.  <a href="#gaf83dd60ca0bc01e456d965724b3f4a5a">More...</a><br /></td></tr>
<tr class="separator:gaf83dd60ca0bc01e456d965724b3f4a5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac90fd06bfd1e8636f57a8a1dbd2f7691"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_m_c___s_p_i.html#gac90fd06bfd1e8636f57a8a1dbd2f7691">send_command_R3</a> (<a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *mmcp, uint8_t cmd, uint32_t arg, uint8_t *response)</td></tr>
<tr class="memdesc:gac90fd06bfd1e8636f57a8a1dbd2f7691"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a command which returns a five bytes response (R3).  <a href="#gac90fd06bfd1e8636f57a8a1dbd2f7691">More...</a><br /></td></tr>
<tr class="separator:gac90fd06bfd1e8636f57a8a1dbd2f7691"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2a732d526a3c06a4827d814b7180d7b2"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_m_c___s_p_i.html#ga2a732d526a3c06a4827d814b7180d7b2">read_CxD</a> (<a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *mmcp, uint8_t cmd, uint32_t cxd[4])</td></tr>
<tr class="memdesc:ga2a732d526a3c06a4827d814b7180d7b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the CSD.  <a href="#ga2a732d526a3c06a4827d814b7180d7b2">More...</a><br /></td></tr>
<tr class="separator:ga2a732d526a3c06a4827d814b7180d7b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab09e4d4341eff30aadfbc5da9ec804e4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_m_c___s_p_i.html#gab09e4d4341eff30aadfbc5da9ec804e4">sync</a> (<a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *mmcp)</td></tr>
<tr class="memdesc:gab09e4d4341eff30aadfbc5da9ec804e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Waits that the card reaches an idle state.  <a href="#gab09e4d4341eff30aadfbc5da9ec804e4">More...</a><br /></td></tr>
<tr class="separator:gab09e4d4341eff30aadfbc5da9ec804e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga351951c841ece80fc692195ab37b2f06"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_m_c___s_p_i.html#ga351951c841ece80fc692195ab37b2f06">mmcInit</a> (void)</td></tr>
<tr class="memdesc:ga351951c841ece80fc692195ab37b2f06"><td class="mdescLeft">&#160;</td><td class="mdescRight">MMC over SPI driver initialization.  <a href="#ga351951c841ece80fc692195ab37b2f06">More...</a><br /></td></tr>
<tr class="separator:ga351951c841ece80fc692195ab37b2f06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaae45b6a15227c9946e4d16820cc2dc09"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_m_c___s_p_i.html#gaae45b6a15227c9946e4d16820cc2dc09">mmcObjectInit</a> (<a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *mmcp)</td></tr>
<tr class="memdesc:gaae45b6a15227c9946e4d16820cc2dc09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes an instance.  <a href="#gaae45b6a15227c9946e4d16820cc2dc09">More...</a><br /></td></tr>
<tr class="separator:gaae45b6a15227c9946e4d16820cc2dc09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga076506461b42641a9fe632cc3e72dab5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_m_c___s_p_i.html#ga076506461b42641a9fe632cc3e72dab5">mmcStart</a> (<a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *mmcp, const <a class="el" href="struct_m_m_c_config.html">MMCConfig</a> *config)</td></tr>
<tr class="memdesc:ga076506461b42641a9fe632cc3e72dab5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures and activates the MMC peripheral.  <a href="#ga076506461b42641a9fe632cc3e72dab5">More...</a><br /></td></tr>
<tr class="separator:ga076506461b42641a9fe632cc3e72dab5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga27833cde77794f914e4802c7e65281a5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_m_c___s_p_i.html#ga27833cde77794f914e4802c7e65281a5">mmcStop</a> (<a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *mmcp)</td></tr>
<tr class="memdesc:ga27833cde77794f914e4802c7e65281a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disables the MMC peripheral.  <a href="#ga27833cde77794f914e4802c7e65281a5">More...</a><br /></td></tr>
<tr class="separator:ga27833cde77794f914e4802c7e65281a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf0bcf9f5d4e2ec9854101905c81145fb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_m_c___s_p_i.html#gaf0bcf9f5d4e2ec9854101905c81145fb">mmcConnect</a> (<a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *mmcp)</td></tr>
<tr class="memdesc:gaf0bcf9f5d4e2ec9854101905c81145fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs the initialization procedure on the inserted card.  <a href="#gaf0bcf9f5d4e2ec9854101905c81145fb">More...</a><br /></td></tr>
<tr class="separator:gaf0bcf9f5d4e2ec9854101905c81145fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga20a509767690b2699f93822c85410ae6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_m_c___s_p_i.html#ga20a509767690b2699f93822c85410ae6">mmcDisconnect</a> (<a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *mmcp)</td></tr>
<tr class="memdesc:ga20a509767690b2699f93822c85410ae6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Brings the driver in a state safe for card removal.  <a href="#ga20a509767690b2699f93822c85410ae6">More...</a><br /></td></tr>
<tr class="separator:ga20a509767690b2699f93822c85410ae6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3f2546dc232233d216fee95be301a622"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_m_c___s_p_i.html#ga3f2546dc232233d216fee95be301a622">mmcStartSequentialRead</a> (<a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *mmcp, uint32_t startblk)</td></tr>
<tr class="memdesc:ga3f2546dc232233d216fee95be301a622"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts a sequential read.  <a href="#ga3f2546dc232233d216fee95be301a622">More...</a><br /></td></tr>
<tr class="separator:ga3f2546dc232233d216fee95be301a622"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga76dc90bd3c90da940be9badb81f860eb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_m_c___s_p_i.html#ga76dc90bd3c90da940be9badb81f860eb">mmcSequentialRead</a> (<a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *mmcp, uint8_t *buffer)</td></tr>
<tr class="memdesc:ga76dc90bd3c90da940be9badb81f860eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a block within a sequential read operation.  <a href="#ga76dc90bd3c90da940be9badb81f860eb">More...</a><br /></td></tr>
<tr class="separator:ga76dc90bd3c90da940be9badb81f860eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa89fef7df608c54026170a9d9cfe1c48"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_m_c___s_p_i.html#gaa89fef7df608c54026170a9d9cfe1c48">mmcStopSequentialRead</a> (<a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *mmcp)</td></tr>
<tr class="memdesc:gaa89fef7df608c54026170a9d9cfe1c48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops a sequential read gracefully.  <a href="#gaa89fef7df608c54026170a9d9cfe1c48">More...</a><br /></td></tr>
<tr class="separator:gaa89fef7df608c54026170a9d9cfe1c48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga087ca365c8638b313beec0bfb6dca098"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_m_c___s_p_i.html#ga087ca365c8638b313beec0bfb6dca098">mmcStartSequentialWrite</a> (<a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *mmcp, uint32_t startblk)</td></tr>
<tr class="memdesc:ga087ca365c8638b313beec0bfb6dca098"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts a sequential write.  <a href="#ga087ca365c8638b313beec0bfb6dca098">More...</a><br /></td></tr>
<tr class="separator:ga087ca365c8638b313beec0bfb6dca098"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga76efb17f1cff7b0222356507e3002dec"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_m_c___s_p_i.html#ga76efb17f1cff7b0222356507e3002dec">mmcSequentialWrite</a> (<a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *mmcp, const uint8_t *buffer)</td></tr>
<tr class="memdesc:ga76efb17f1cff7b0222356507e3002dec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes a block within a sequential write operation.  <a href="#ga76efb17f1cff7b0222356507e3002dec">More...</a><br /></td></tr>
<tr class="separator:ga76efb17f1cff7b0222356507e3002dec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac32c0ab56af0909733f7070eb6d549e9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_m_c___s_p_i.html#gac32c0ab56af0909733f7070eb6d549e9">mmcStopSequentialWrite</a> (<a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *mmcp)</td></tr>
<tr class="memdesc:gac32c0ab56af0909733f7070eb6d549e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops a sequential write gracefully.  <a href="#gac32c0ab56af0909733f7070eb6d549e9">More...</a><br /></td></tr>
<tr class="separator:gac32c0ab56af0909733f7070eb6d549e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga406d68dad8363c841cf80d43ab863dda"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_m_c___s_p_i.html#ga406d68dad8363c841cf80d43ab863dda">mmcSync</a> (<a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *mmcp)</td></tr>
<tr class="memdesc:ga406d68dad8363c841cf80d43ab863dda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Waits for card idle condition.  <a href="#ga406d68dad8363c841cf80d43ab863dda">More...</a><br /></td></tr>
<tr class="separator:ga406d68dad8363c841cf80d43ab863dda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3335431326aae14670311c0b39fd4e1d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_m_c___s_p_i.html#ga3335431326aae14670311c0b39fd4e1d">mmcGetInfo</a> (<a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *mmcp, <a class="el" href="struct_block_device_info.html">BlockDeviceInfo</a> *bdip)</td></tr>
<tr class="memdesc:ga3335431326aae14670311c0b39fd4e1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the media info.  <a href="#ga3335431326aae14670311c0b39fd4e1d">More...</a><br /></td></tr>
<tr class="separator:ga3335431326aae14670311c0b39fd4e1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac1c3aed4f9a57cc60f9c65d5b78d2cd5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_m_c___s_p_i.html#gac1c3aed4f9a57cc60f9c65d5b78d2cd5">mmcErase</a> (<a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *mmcp, uint32_t startblk, uint32_t endblk)</td></tr>
<tr class="memdesc:gac1c3aed4f9a57cc60f9c65d5b78d2cd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Erases blocks.  <a href="#gac1c3aed4f9a57cc60f9c65d5b78d2cd5">More...</a><br /></td></tr>
<tr class="separator:gac1c3aed4f9a57cc60f9c65d5b78d2cd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga99f29fc5df8d087e9de16b2c98ee55b0"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="struct_m_m_c_driver_v_m_t.html">MMCDriverVMT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_m_c___s_p_i.html#ga99f29fc5df8d087e9de16b2c98ee55b0">mmc_vmt</a></td></tr>
<tr class="memdesc:ga99f29fc5df8d087e9de16b2c98ee55b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Virtual methods table.  <a href="#ga99f29fc5df8d087e9de16b2c98ee55b0">More...</a><br /></td></tr>
<tr class="separator:ga99f29fc5df8d087e9de16b2c98ee55b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga645ff497f0bb9c265d939b2cd6d1e5c2"><td class="memItemLeft" align="right" valign="top">static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_m_c___s_p_i.html#ga645ff497f0bb9c265d939b2cd6d1e5c2">crc7_lookup_table</a> [256]</td></tr>
<tr class="memdesc:ga645ff497f0bb9c265d939b2cd6d1e5c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lookup table for CRC-7 ( based on polynomial x^7 + x^3 + 1).  <a href="#ga645ff497f0bb9c265d939b2cd6d1e5c2">More...</a><br /></td></tr>
<tr class="separator:ga645ff497f0bb9c265d939b2cd6d1e5c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga3087dfffa81dd8a0a80ee92746e65fe2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MMC_NICE_WAITING&#160;&#160;&#160;TRUE</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delays insertions. </p>
<p>If enabled this options inserts delays into the MMC waiting routines releasing some extra CPU time for the threads with lower priority, this may slow down the driver a bit however. This option is recommended also if the SPI driver does not use a DMA channel and heavily loads the CPU. </p>

<p>Definition at line <a class="el" href="hal__mmc__spi_8h_source.html#l00056">56</a> of file <a class="el" href="hal__mmc__spi_8h_source.html">hal_mmc_spi.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga3ce5d5a8b1c316f4409e347efb1751fd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _mmc_driver_methods&#160;&#160;&#160;<a class="el" href="group___m_m_c_s_d.html#gaa897927013f0374d8c46c9fdc145e74e">_mmcsd_block_device_methods</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code><a class="el" href="struct_m_m_c_driver.html" title="Structure representing a MMC/SD over SPI driver. ">MMCDriver</a></code> specific methods. </p>

<p>Definition at line <a class="el" href="hal__mmc__spi_8h_source.html#l00093">93</a> of file <a class="el" href="hal__mmc__spi_8h_source.html">hal_mmc_spi.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga74f43ee544666e67441dd9e4b6b11c8a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define mmcIsCardInserted</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">mmcp</td><td>)</td>
          <td>&#160;&#160;&#160;mmc_lld_is_card_inserted(mmcp)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the card insertion status. </p>
<dl class="section note"><dt>Note</dt><dd>This macro wraps a low level function named <code>sdc_lld_is_card_inserted()</code>, this function must be provided by the application because it is not part of the SDC driver.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mmcp</td><td>pointer to the <code><a class="el" href="struct_m_m_c_driver.html" title="Structure representing a MMC/SD over SPI driver. ">MMCDriver</a></code> object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The card state. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>card not inserted. </td></tr>
    <tr><td class="paramname">true</td><td>card inserted.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Normal API, this function can be invoked by regular system threads but not from within a lock zone. </dd></dl>

<p>Definition at line <a class="el" href="hal__mmc__spi_8h_source.html#l00148">148</a> of file <a class="el" href="hal__mmc__spi_8h_source.html">hal_mmc_spi.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga2f69ba255b397f2d5f09cf1fe26a953f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define mmcIsWriteProtected</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">mmcp</td><td>)</td>
          <td>&#160;&#160;&#160;mmc_lld_is_write_protected(mmcp)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the write protect status. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mmcp</td><td>pointer to the <code><a class="el" href="struct_m_m_c_driver.html" title="Structure representing a MMC/SD over SPI driver. ">MMCDriver</a></code> object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The card state. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>card not inserted. </td></tr>
    <tr><td class="paramname">true</td><td>card inserted.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Normal API, this function can be invoked by regular system threads but not from within a lock zone. </dd></dl>

<p>Definition at line <a class="el" href="hal__mmc__spi_8h_source.html#l00160">160</a> of file <a class="el" href="hal__mmc__spi_8h_source.html">hal_mmc_spi.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gac82b7e209601c890c0d1587cefaf0813"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t crc7 </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>crc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculate the MMC standard CRC-7 based on a lookup table. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">crc</td><td>start value for CRC </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buffer</td><td>pointer to data buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>length of data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Calculated CRC </dd></dl>

<p>Definition at line <a class="el" href="hal__mmc__spi_8c_source.html#l00148">148</a> of file <a class="el" href="hal__mmc__spi_8c_source.html">hal_mmc_spi.c</a>.</p>

<p>References <a class="el" href="group___m_m_c___s_p_i.html#ga645ff497f0bb9c265d939b2cd6d1e5c2">crc7_lookup_table</a>.</p>

<p>Referenced by <a class="el" href="group___m_m_c___s_p_i.html#ga9e3bc1849600a89d28eac5aaa8e5ea14">send_hdr()</a>.</p>

</div>
</div>
<a class="anchor" id="ga2047c3d4f7ce72dcb6c4942f57e92600"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void wait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *&#160;</td>
          <td class="paramname"><em>mmcp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Waits an idle condition. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mmcp</td><td>pointer to the <code><a class="el" href="struct_m_m_c_driver.html" title="Structure representing a MMC/SD over SPI driver. ">MMCDriver</a></code> object</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Not an API, this function is for internal use only. </dd></dl>

<p>Definition at line <a class="el" href="hal__mmc__spi_8c_source.html#l00164">164</a> of file <a class="el" href="hal__mmc__spi_8c_source.html">hal_mmc_spi.c</a>.</p>

<p>References <a class="el" href="struct_m_m_c_driver.html#aa26a6d1ed19b511139179a4c168f26e2">MMCDriver::config</a>, <a class="el" href="group___o_s_a_l.html#gaf64de511f36e28b0365d138d5e281f5b">osalThreadSleepMilliseconds</a>, <a class="el" href="struct_m_m_c_config.html#afa6149822441abfcb6ee6b92ec00072d">MMCConfig::spip</a>, and <a class="el" href="group___s_p_i.html#gadd99ad823b391dde114f04dedafe5e80">spiReceive()</a>.</p>

<p>Referenced by <a class="el" href="group___m_m_c___s_p_i.html#ga76efb17f1cff7b0222356507e3002dec">mmcSequentialWrite()</a>, and <a class="el" href="group___m_m_c___s_p_i.html#ga9e3bc1849600a89d28eac5aaa8e5ea14">send_hdr()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_m_c___s_p_i_ga2047c3d4f7ce72dcb6c4942f57e92600_cgraph.png" border="0" usemap="#group___m_m_c___s_p_i_ga2047c3d4f7ce72dcb6c4942f57e92600_cgraph" alt=""/></div>
<map name="group___m_m_c___s_p_i_ga2047c3d4f7ce72dcb6c4942f57e92600_cgraph" id="group___m_m_c___s_p_i_ga2047c3d4f7ce72dcb6c4942f57e92600_cgraph">
<area shape="rect" id="node2" href="group___s_p_i.html#gadd99ad823b391dde114f04dedafe5e80" title="Receives data from the SPI bus. " alt="" coords="95,53,168,77"/>
<area shape="rect" id="node3" href="group___o_s_a_l.html#ga0cb5e528b0114b4ca61c2eb65a0515fa" title="Enters a critical zone from thread context. " alt="" coords="239,5,319,29"/>
<area shape="rect" id="node4" href="group___o_s_a_l.html#ga49573c45ca88cd172ee03da252f69ae4" title="Sends the current thread sleeping and sets a reference variable. " alt="" coords="216,53,341,77"/>
<area shape="rect" id="node5" href="group___o_s_a_l.html#ga17dbf4a1761019b8d94f43832c506543" title="Leaves a critical zone from thread context. " alt="" coords="233,101,324,125"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga9e3bc1849600a89d28eac5aaa8e5ea14"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void send_hdr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *&#160;</td>
          <td class="paramname"><em>mmcp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends a command header. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mmcp</td><td>pointer to the <code><a class="el" href="struct_m_m_c_driver.html" title="Structure representing a MMC/SD over SPI driver. ">MMCDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cmd</td><td>the command id </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">arg</td><td>the command argument</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Not an API, this function is for internal use only. </dd></dl>

<p>Definition at line <a class="el" href="hal__mmc__spi_8c_source.html#l00196">196</a> of file <a class="el" href="hal__mmc__spi_8c_source.html">hal_mmc_spi.c</a>.</p>

<p>References <a class="el" href="struct_m_m_c_driver.html#aa26a6d1ed19b511139179a4c168f26e2">MMCDriver::config</a>, <a class="el" href="group___m_m_c___s_p_i.html#gac82b7e209601c890c0d1587cefaf0813">crc7()</a>, <a class="el" href="struct_m_m_c_config.html#afa6149822441abfcb6ee6b92ec00072d">MMCConfig::spip</a>, <a class="el" href="group___s_p_i.html#ga382cfbdffd2df57cf3843d45164e8bfc">spiSend()</a>, and <a class="el" href="group___m_m_c___s_p_i.html#ga2047c3d4f7ce72dcb6c4942f57e92600">wait()</a>.</p>

<p>Referenced by <a class="el" href="group___m_m_c___s_p_i.html#ga3f2546dc232233d216fee95be301a622">mmcStartSequentialRead()</a>, <a class="el" href="group___m_m_c___s_p_i.html#ga087ca365c8638b313beec0bfb6dca098">mmcStartSequentialWrite()</a>, <a class="el" href="group___m_m_c___s_p_i.html#ga2a732d526a3c06a4827d814b7180d7b2">read_CxD()</a>, <a class="el" href="group___m_m_c___s_p_i.html#gaf83dd60ca0bc01e456d965724b3f4a5a">send_command_R1()</a>, and <a class="el" href="group___m_m_c___s_p_i.html#gac90fd06bfd1e8636f57a8a1dbd2f7691">send_command_R3()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_m_c___s_p_i_ga9e3bc1849600a89d28eac5aaa8e5ea14_cgraph.png" border="0" usemap="#group___m_m_c___s_p_i_ga9e3bc1849600a89d28eac5aaa8e5ea14_cgraph" alt=""/></div>
<map name="group___m_m_c___s_p_i_ga9e3bc1849600a89d28eac5aaa8e5ea14_cgraph" id="group___m_m_c___s_p_i_ga9e3bc1849600a89d28eac5aaa8e5ea14_cgraph">
<area shape="rect" id="node2" href="group___m_m_c___s_p_i.html#gac82b7e209601c890c0d1587cefaf0813" title="Calculate the MMC standard CRC&#45;7 based on a lookup table. " alt="" coords="120,5,163,29"/>
<area shape="rect" id="node3" href="group___s_p_i.html#ga382cfbdffd2df57cf3843d45164e8bfc" title="Sends data over the SPI bus. " alt="" coords="217,56,277,80"/>
<area shape="rect" id="node7" href="group___m_m_c___s_p_i.html#ga2047c3d4f7ce72dcb6c4942f57e92600" title="Waits an idle condition. " alt="" coords="121,104,162,128"/>
<area shape="rect" id="node4" href="group___o_s_a_l.html#ga0cb5e528b0114b4ca61c2eb65a0515fa" title="Enters a critical zone from thread context. " alt="" coords="355,32,435,56"/>
<area shape="rect" id="node5" href="group___o_s_a_l.html#ga49573c45ca88cd172ee03da252f69ae4" title="Sends the current thread sleeping and sets a reference variable. " alt="" coords="332,80,457,104"/>
<area shape="rect" id="node6" href="group___o_s_a_l.html#ga17dbf4a1761019b8d94f43832c506543" title="Leaves a critical zone from thread context. " alt="" coords="349,128,440,152"/>
<area shape="rect" id="node8" href="group___s_p_i.html#gadd99ad823b391dde114f04dedafe5e80" title="Receives data from the SPI bus. " alt="" coords="211,104,284,128"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga3862a084e567aa0e36d86038f504b7b5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t recvr1 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *&#160;</td>
          <td class="paramname"><em>mmcp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Receives a single byte response. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mmcp</td><td>pointer to the <code><a class="el" href="struct_m_m_c_driver.html" title="Structure representing a MMC/SD over SPI driver. ">MMCDriver</a></code> object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The response as an <code>uint8_t</code> value. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0xFF</td><td>timed out.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Not an API, this function is for internal use only. </dd></dl>

<p>Definition at line <a class="el" href="hal__mmc__spi_8c_source.html#l00222">222</a> of file <a class="el" href="hal__mmc__spi_8c_source.html">hal_mmc_spi.c</a>.</p>

<p>References <a class="el" href="struct_m_m_c_driver.html#aa26a6d1ed19b511139179a4c168f26e2">MMCDriver::config</a>, <a class="el" href="struct_m_m_c_config.html#afa6149822441abfcb6ee6b92ec00072d">MMCConfig::spip</a>, and <a class="el" href="group___s_p_i.html#gadd99ad823b391dde114f04dedafe5e80">spiReceive()</a>.</p>

<p>Referenced by <a class="el" href="group___m_m_c___s_p_i.html#ga3f2546dc232233d216fee95be301a622">mmcStartSequentialRead()</a>, <a class="el" href="group___m_m_c___s_p_i.html#ga087ca365c8638b313beec0bfb6dca098">mmcStartSequentialWrite()</a>, <a class="el" href="group___m_m_c___s_p_i.html#gaa89fef7df608c54026170a9d9cfe1c48">mmcStopSequentialRead()</a>, <a class="el" href="group___m_m_c___s_p_i.html#ga2a732d526a3c06a4827d814b7180d7b2">read_CxD()</a>, <a class="el" href="group___m_m_c___s_p_i.html#gadcc5410f945c25c65643294faa56df48">recvr3()</a>, and <a class="el" href="group___m_m_c___s_p_i.html#gaf83dd60ca0bc01e456d965724b3f4a5a">send_command_R1()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_m_c___s_p_i_ga3862a084e567aa0e36d86038f504b7b5_cgraph.png" border="0" usemap="#group___m_m_c___s_p_i_ga3862a084e567aa0e36d86038f504b7b5_cgraph" alt=""/></div>
<map name="group___m_m_c___s_p_i_ga3862a084e567aa0e36d86038f504b7b5_cgraph" id="group___m_m_c___s_p_i_ga3862a084e567aa0e36d86038f504b7b5_cgraph">
<area shape="rect" id="node2" href="group___s_p_i.html#gadd99ad823b391dde114f04dedafe5e80" title="Receives data from the SPI bus. " alt="" coords="105,53,179,77"/>
<area shape="rect" id="node3" href="group___o_s_a_l.html#ga0cb5e528b0114b4ca61c2eb65a0515fa" title="Enters a critical zone from thread context. " alt="" coords="249,5,329,29"/>
<area shape="rect" id="node4" href="group___o_s_a_l.html#ga49573c45ca88cd172ee03da252f69ae4" title="Sends the current thread sleeping and sets a reference variable. " alt="" coords="227,53,352,77"/>
<area shape="rect" id="node5" href="group___o_s_a_l.html#ga17dbf4a1761019b8d94f43832c506543" title="Leaves a critical zone from thread context. " alt="" coords="244,101,335,125"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gadcc5410f945c25c65643294faa56df48"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t recvr3 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *&#160;</td>
          <td class="paramname"><em>mmcp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Receives a three byte response. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mmcp</td><td>pointer to the <code><a class="el" href="struct_m_m_c_driver.html" title="Structure representing a MMC/SD over SPI driver. ">MMCDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buffer</td><td>pointer to four bytes wide buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>First response byte as an <code>uint8_t</code> value. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0xFF</td><td>timed out.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Not an API, this function is for internal use only. </dd></dl>

<p>Definition at line <a class="el" href="hal__mmc__spi_8c_source.html#l00245">245</a> of file <a class="el" href="hal__mmc__spi_8c_source.html">hal_mmc_spi.c</a>.</p>

<p>References <a class="el" href="struct_m_m_c_driver.html#aa26a6d1ed19b511139179a4c168f26e2">MMCDriver::config</a>, <a class="el" href="group___m_m_c___s_p_i.html#ga3862a084e567aa0e36d86038f504b7b5">recvr1()</a>, <a class="el" href="struct_m_m_c_config.html#afa6149822441abfcb6ee6b92ec00072d">MMCConfig::spip</a>, and <a class="el" href="group___s_p_i.html#gadd99ad823b391dde114f04dedafe5e80">spiReceive()</a>.</p>

<p>Referenced by <a class="el" href="group___m_m_c___s_p_i.html#gac90fd06bfd1e8636f57a8a1dbd2f7691">send_command_R3()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_m_c___s_p_i_gadcc5410f945c25c65643294faa56df48_cgraph.png" border="0" usemap="#group___m_m_c___s_p_i_gadcc5410f945c25c65643294faa56df48_cgraph" alt=""/></div>
<map name="group___m_m_c___s_p_i_gadcc5410f945c25c65643294faa56df48_cgraph" id="group___m_m_c___s_p_i_gadcc5410f945c25c65643294faa56df48_cgraph">
<area shape="rect" id="node2" href="group___m_m_c___s_p_i.html#ga3862a084e567aa0e36d86038f504b7b5" title="Receives a single byte response. " alt="" coords="105,5,157,29"/>
<area shape="rect" id="node3" href="group___s_p_i.html#gadd99ad823b391dde114f04dedafe5e80" title="Receives data from the SPI bus. " alt="" coords="205,31,279,55"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaf83dd60ca0bc01e456d965724b3f4a5a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t send_command_R1 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *&#160;</td>
          <td class="paramname"><em>mmcp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends a command an returns a single byte response. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mmcp</td><td>pointer to the <code><a class="el" href="struct_m_m_c_driver.html" title="Structure representing a MMC/SD over SPI driver. ">MMCDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cmd</td><td>the command id </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">arg</td><td>the command argument </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The response as an <code>uint8_t</code> value. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0xFF</td><td>timed out.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Not an API, this function is for internal use only. </dd></dl>

<p>Definition at line <a class="el" href="hal__mmc__spi_8c_source.html#l00265">265</a> of file <a class="el" href="hal__mmc__spi_8c_source.html">hal_mmc_spi.c</a>.</p>

<p>References <a class="el" href="struct_m_m_c_driver.html#aa26a6d1ed19b511139179a4c168f26e2">MMCDriver::config</a>, <a class="el" href="group___m_m_c___s_p_i.html#ga3862a084e567aa0e36d86038f504b7b5">recvr1()</a>, <a class="el" href="group___m_m_c___s_p_i.html#ga9e3bc1849600a89d28eac5aaa8e5ea14">send_hdr()</a>, <a class="el" href="struct_m_m_c_config.html#afa6149822441abfcb6ee6b92ec00072d">MMCConfig::spip</a>, <a class="el" href="group___s_p_i.html#ga00809152c869db80192aa3e04266a99a">spiSelect()</a>, and <a class="el" href="group___s_p_i.html#gae291c012872da9c89dec23581f701b5f">spiUnselect()</a>.</p>

<p>Referenced by <a class="el" href="group___m_m_c___s_p_i.html#gaf0bcf9f5d4e2ec9854101905c81145fb">mmcConnect()</a>, and <a class="el" href="group___m_m_c___s_p_i.html#gac1c3aed4f9a57cc60f9c65d5b78d2cd5">mmcErase()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_m_c___s_p_i_gaf83dd60ca0bc01e456d965724b3f4a5a_cgraph.png" border="0" usemap="#group___m_m_c___s_p_i_gaf83dd60ca0bc01e456d965724b3f4a5a_cgraph" alt=""/></div>
<map name="group___m_m_c___s_p_i_gaf83dd60ca0bc01e456d965724b3f4a5a_cgraph" id="group___m_m_c___s_p_i_gaf83dd60ca0bc01e456d965724b3f4a5a_cgraph">
<area shape="rect" id="node2" href="group___m_m_c___s_p_i.html#ga3862a084e567aa0e36d86038f504b7b5" title="Receives a single byte response. " alt="" coords="179,5,231,29"/>
<area shape="rect" id="node6" href="group___m_m_c___s_p_i.html#ga9e3bc1849600a89d28eac5aaa8e5ea14" title="Sends a command header. " alt="" coords="172,103,239,127"/>
<area shape="rect" id="node10" href="group___s_p_i.html#ga00809152c869db80192aa3e04266a99a" title="Asserts the slave select signal and prepares for transfers. " alt="" coords="383,125,447,149"/>
<area shape="rect" id="node11" href="group___s_p_i.html#gae291c012872da9c89dec23581f701b5f" title="Deasserts the slave select signal. " alt="" coords="377,173,453,197"/>
<area shape="rect" id="node3" href="group___s_p_i.html#gadd99ad823b391dde114f04dedafe5e80" title="Receives data from the SPI bus. " alt="" coords="379,29,452,53"/>
<area shape="rect" id="node4" href="group___o_s_a_l.html#ga0cb5e528b0114b4ca61c2eb65a0515fa" title="Enters a critical zone from thread context. " alt="" coords="507,77,587,101"/>
<area shape="rect" id="node5" href="group___o_s_a_l.html#ga17dbf4a1761019b8d94f43832c506543" title="Leaves a critical zone from thread context. " alt="" coords="501,125,592,149"/>
<area shape="rect" id="node7" href="group___m_m_c___s_p_i.html#gac82b7e209601c890c0d1587cefaf0813" title="Calculate the MMC standard CRC&#45;7 based on a lookup table. " alt="" coords="287,127,329,151"/>
<area shape="rect" id="node8" href="group___s_p_i.html#ga382cfbdffd2df57cf3843d45164e8bfc" title="Sends data over the SPI bus. " alt="" coords="385,77,445,101"/>
<area shape="rect" id="node9" href="group___m_m_c___s_p_i.html#ga2047c3d4f7ce72dcb6c4942f57e92600" title="Waits an idle condition. " alt="" coords="287,28,329,52"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gac90fd06bfd1e8636f57a8a1dbd2f7691"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t send_command_R3 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *&#160;</td>
          <td class="paramname"><em>mmcp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends a command which returns a five bytes response (R3). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mmcp</td><td>pointer to the <code><a class="el" href="struct_m_m_c_driver.html" title="Structure representing a MMC/SD over SPI driver. ">MMCDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cmd</td><td>the command id </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">arg</td><td>the command argument </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>pointer to four bytes wide uint8_t buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The first byte of the response (R1) as an <code>uint8_t</code> value. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0xFF</td><td>timed out.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Not an API, this function is for internal use only. </dd></dl>

<p>Definition at line <a class="el" href="hal__mmc__spi_8c_source.html#l00288">288</a> of file <a class="el" href="hal__mmc__spi_8c_source.html">hal_mmc_spi.c</a>.</p>

<p>References <a class="el" href="struct_m_m_c_driver.html#aa26a6d1ed19b511139179a4c168f26e2">MMCDriver::config</a>, <a class="el" href="group___m_m_c___s_p_i.html#gadcc5410f945c25c65643294faa56df48">recvr3()</a>, <a class="el" href="group___m_m_c___s_p_i.html#ga9e3bc1849600a89d28eac5aaa8e5ea14">send_hdr()</a>, <a class="el" href="struct_m_m_c_config.html#afa6149822441abfcb6ee6b92ec00072d">MMCConfig::spip</a>, <a class="el" href="group___s_p_i.html#ga00809152c869db80192aa3e04266a99a">spiSelect()</a>, and <a class="el" href="group___s_p_i.html#gae291c012872da9c89dec23581f701b5f">spiUnselect()</a>.</p>

<p>Referenced by <a class="el" href="group___m_m_c___s_p_i.html#gaf0bcf9f5d4e2ec9854101905c81145fb">mmcConnect()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_m_c___s_p_i_gac90fd06bfd1e8636f57a8a1dbd2f7691_cgraph.png" border="0" usemap="#group___m_m_c___s_p_i_gac90fd06bfd1e8636f57a8a1dbd2f7691_cgraph" alt=""/></div>
<map name="group___m_m_c___s_p_i_gac90fd06bfd1e8636f57a8a1dbd2f7691_cgraph" id="group___m_m_c___s_p_i_gac90fd06bfd1e8636f57a8a1dbd2f7691_cgraph">
<area shape="rect" id="node2" href="group___m_m_c___s_p_i.html#gadcc5410f945c25c65643294faa56df48" title="Receives a three byte response. " alt="" coords="179,55,231,79"/>
<area shape="rect" id="node7" href="group___m_m_c___s_p_i.html#ga9e3bc1849600a89d28eac5aaa8e5ea14" title="Sends a command header. " alt="" coords="172,177,239,201"/>
<area shape="rect" id="node11" href="group___s_p_i.html#ga00809152c869db80192aa3e04266a99a" title="Asserts the slave select signal and prepares for transfers. " alt="" coords="393,249,457,273"/>
<area shape="rect" id="node12" href="group___s_p_i.html#gae291c012872da9c89dec23581f701b5f" title="Deasserts the slave select signal. " alt="" coords="387,297,463,321"/>
<area shape="rect" id="node3" href="group___m_m_c___s_p_i.html#ga3862a084e567aa0e36d86038f504b7b5" title="Receives a single byte response. " alt="" coords="287,5,339,29"/>
<area shape="rect" id="node4" href="group___s_p_i.html#gadd99ad823b391dde114f04dedafe5e80" title="Receives data from the SPI bus. " alt="" coords="388,104,461,128"/>
<area shape="rect" id="node5" href="group___o_s_a_l.html#ga0cb5e528b0114b4ca61c2eb65a0515fa" title="Enters a critical zone from thread context. " alt="" coords="516,201,596,225"/>
<area shape="rect" id="node6" href="group___o_s_a_l.html#ga17dbf4a1761019b8d94f43832c506543" title="Leaves a critical zone from thread context. " alt="" coords="511,249,601,273"/>
<area shape="rect" id="node8" href="group___m_m_c___s_p_i.html#gac82b7e209601c890c0d1587cefaf0813" title="Calculate the MMC standard CRC&#45;7 based on a lookup table. " alt="" coords="291,152,334,176"/>
<area shape="rect" id="node9" href="group___s_p_i.html#ga382cfbdffd2df57cf3843d45164e8bfc" title="Sends data over the SPI bus. " alt="" coords="395,201,455,225"/>
<area shape="rect" id="node10" href="group___m_m_c___s_p_i.html#ga2047c3d4f7ce72dcb6c4942f57e92600" title="Waits an idle condition. " alt="" coords="292,104,333,128"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga2a732d526a3c06a4827d814b7180d7b2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool read_CxD </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *&#160;</td>
          <td class="paramname"><em>mmcp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>cxd</em>[4]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads the CSD. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mmcp</td><td>pointer to the <code><a class="el" href="struct_m_m_c_driver.html" title="Structure representing a MMC/SD over SPI driver. ">MMCDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">cmd</td><td>command </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">cxd</td><td>pointer to the CSD/CID buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL_SUCCESS</td><td>the operation succeeded. </td></tr>
    <tr><td class="paramname">HAL_FAILED</td><td>the operation failed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Not an API, this function is for internal use only. </dd></dl>

<p>Definition at line <a class="el" href="hal__mmc__spi_8c_source.html#l00312">312</a> of file <a class="el" href="hal__mmc__spi_8c_source.html">hal_mmc_spi.c</a>.</p>

<p>References <a class="el" href="struct_m_m_c_driver.html#aa26a6d1ed19b511139179a4c168f26e2">MMCDriver::config</a>, <a class="el" href="group___m_m_c___s_p_i.html#ga3862a084e567aa0e36d86038f504b7b5">recvr1()</a>, <a class="el" href="group___m_m_c___s_p_i.html#ga9e3bc1849600a89d28eac5aaa8e5ea14">send_hdr()</a>, <a class="el" href="group___s_p_i.html#ga43889a7d4c473f653596f8c0acafce2a">spiIgnore()</a>, <a class="el" href="struct_m_m_c_config.html#afa6149822441abfcb6ee6b92ec00072d">MMCConfig::spip</a>, <a class="el" href="group___s_p_i.html#gadd99ad823b391dde114f04dedafe5e80">spiReceive()</a>, <a class="el" href="group___s_p_i.html#ga00809152c869db80192aa3e04266a99a">spiSelect()</a>, and <a class="el" href="group___s_p_i.html#gae291c012872da9c89dec23581f701b5f">spiUnselect()</a>.</p>

<p>Referenced by <a class="el" href="group___m_m_c___s_p_i.html#gaf0bcf9f5d4e2ec9854101905c81145fb">mmcConnect()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_m_c___s_p_i_ga2a732d526a3c06a4827d814b7180d7b2_cgraph.png" border="0" usemap="#group___m_m_c___s_p_i_ga2a732d526a3c06a4827d814b7180d7b2_cgraph" alt=""/></div>
<map name="group___m_m_c___s_p_i_ga2a732d526a3c06a4827d814b7180d7b2_cgraph" id="group___m_m_c___s_p_i_ga2a732d526a3c06a4827d814b7180d7b2_cgraph">
<area shape="rect" id="node2" href="group___m_m_c___s_p_i.html#ga3862a084e567aa0e36d86038f504b7b5" title="Receives a single byte response. " alt="" coords="131,20,183,44"/>
<area shape="rect" id="node3" href="group___s_p_i.html#gadd99ad823b391dde114f04dedafe5e80" title="Receives data from the SPI bus. " alt="" coords="331,44,404,68"/>
<area shape="rect" id="node7" href="group___m_m_c___s_p_i.html#ga9e3bc1849600a89d28eac5aaa8e5ea14" title="Sends a command header. " alt="" coords="124,117,191,141"/>
<area shape="rect" id="node11" href="group___s_p_i.html#ga43889a7d4c473f653596f8c0acafce2a" title="Ignores data on the SPI bus. " alt="" coords="334,140,401,164"/>
<area shape="rect" id="node12" href="group___s_p_i.html#ga00809152c869db80192aa3e04266a99a" title="Asserts the slave select signal and prepares for transfers. " alt="" coords="335,188,399,212"/>
<area shape="rect" id="node13" href="group___s_p_i.html#gae291c012872da9c89dec23581f701b5f" title="Deasserts the slave select signal. " alt="" coords="329,236,405,260"/>
<area shape="rect" id="node4" href="group___o_s_a_l.html#ga0cb5e528b0114b4ca61c2eb65a0515fa" title="Enters a critical zone from thread context. " alt="" coords="476,140,556,164"/>
<area shape="rect" id="node5" href="group___o_s_a_l.html#ga49573c45ca88cd172ee03da252f69ae4" title="Sends the current thread sleeping and sets a reference variable. " alt="" coords="453,92,579,116"/>
<area shape="rect" id="node6" href="group___o_s_a_l.html#ga17dbf4a1761019b8d94f43832c506543" title="Leaves a critical zone from thread context. " alt="" coords="471,188,561,212"/>
<area shape="rect" id="node8" href="group___m_m_c___s_p_i.html#gac82b7e209601c890c0d1587cefaf0813" title="Calculate the MMC standard CRC&#45;7 based on a lookup table. " alt="" coords="239,141,281,165"/>
<area shape="rect" id="node9" href="group___s_p_i.html#ga382cfbdffd2df57cf3843d45164e8bfc" title="Sends data over the SPI bus. " alt="" coords="337,92,397,116"/>
<area shape="rect" id="node10" href="group___m_m_c___s_p_i.html#ga2047c3d4f7ce72dcb6c4942f57e92600" title="Waits an idle condition. " alt="" coords="239,43,281,67"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gab09e4d4341eff30aadfbc5da9ec804e4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void sync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *&#160;</td>
          <td class="paramname"><em>mmcp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Waits that the card reaches an idle state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mmcp</td><td>pointer to the <code><a class="el" href="struct_m_m_c_driver.html" title="Structure representing a MMC/SD over SPI driver. ">MMCDriver</a></code> object</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Not an API, this function is for internal use only. </dd></dl>

<p>Definition at line <a class="el" href="hal__mmc__spi_8c_source.html#l00354">354</a> of file <a class="el" href="hal__mmc__spi_8c_source.html">hal_mmc_spi.c</a>.</p>

<p>References <a class="el" href="struct_m_m_c_driver.html#aa26a6d1ed19b511139179a4c168f26e2">MMCDriver::config</a>, <a class="el" href="group___o_s_a_l.html#gaf64de511f36e28b0365d138d5e281f5b">osalThreadSleepMilliseconds</a>, <a class="el" href="struct_m_m_c_config.html#afa6149822441abfcb6ee6b92ec00072d">MMCConfig::spip</a>, <a class="el" href="group___s_p_i.html#gadd99ad823b391dde114f04dedafe5e80">spiReceive()</a>, <a class="el" href="group___s_p_i.html#ga00809152c869db80192aa3e04266a99a">spiSelect()</a>, and <a class="el" href="group___s_p_i.html#gae291c012872da9c89dec23581f701b5f">spiUnselect()</a>.</p>

<p>Referenced by <a class="el" href="group___m_m_c___s_p_i.html#ga20a509767690b2699f93822c85410ae6">mmcDisconnect()</a>, and <a class="el" href="group___m_m_c___s_p_i.html#ga406d68dad8363c841cf80d43ab863dda">mmcSync()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_m_c___s_p_i_gab09e4d4341eff30aadfbc5da9ec804e4_cgraph.png" border="0" usemap="#group___m_m_c___s_p_i_gab09e4d4341eff30aadfbc5da9ec804e4_cgraph" alt=""/></div>
<map name="group___m_m_c___s_p_i_gab09e4d4341eff30aadfbc5da9ec804e4_cgraph" id="group___m_m_c___s_p_i_gab09e4d4341eff30aadfbc5da9ec804e4_cgraph">
<area shape="rect" id="node2" href="group___s_p_i.html#gadd99ad823b391dde114f04dedafe5e80" title="Receives data from the SPI bus. " alt="" coords="97,101,171,125"/>
<area shape="rect" id="node6" href="group___s_p_i.html#ga00809152c869db80192aa3e04266a99a" title="Asserts the slave select signal and prepares for transfers. " alt="" coords="102,53,166,77"/>
<area shape="rect" id="node7" href="group___s_p_i.html#gae291c012872da9c89dec23581f701b5f" title="Deasserts the slave select signal. " alt="" coords="96,5,172,29"/>
<area shape="rect" id="node3" href="group___o_s_a_l.html#ga0cb5e528b0114b4ca61c2eb65a0515fa" title="Enters a critical zone from thread context. " alt="" coords="243,53,323,77"/>
<area shape="rect" id="node4" href="group___o_s_a_l.html#ga49573c45ca88cd172ee03da252f69ae4" title="Sends the current thread sleeping and sets a reference variable. " alt="" coords="220,101,345,125"/>
<area shape="rect" id="node5" href="group___o_s_a_l.html#ga17dbf4a1761019b8d94f43832c506543" title="Leaves a critical zone from thread context. " alt="" coords="237,5,328,29"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga351951c841ece80fc692195ab37b2f06"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mmcInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>MMC over SPI driver initialization. </p>
<dl class="section note"><dt>Note</dt><dd>This function is implicitly invoked by <code><a class="el" href="group___h_a_l.html#gafd89c1650df524d95aef39b8bc38170d" title="HAL initialization. ">halInit()</a></code>, there is no need to explicitly initialize the driver.</dd></dl>
<dl class="section user"><dt>Function Class:</dt><dd>Initializer, this function just initializes an object and can be invoked before the kernel is initialized. </dd></dl>

<p>Definition at line <a class="el" href="hal__mmc__spi_8c_source.html#l00382">382</a> of file <a class="el" href="hal__mmc__spi_8c_source.html">hal_mmc_spi.c</a>.</p>

<p>Referenced by <a class="el" href="group___h_a_l.html#gafd89c1650df524d95aef39b8bc38170d">halInit()</a>.</p>

</div>
</div>
<a class="anchor" id="gaae45b6a15227c9946e4d16820cc2dc09"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mmcObjectInit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *&#160;</td>
          <td class="paramname"><em>mmcp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes an instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">mmcp</td><td>pointer to the <code><a class="el" href="struct_m_m_c_driver.html" title="Structure representing a MMC/SD over SPI driver. ">MMCDriver</a></code> object</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Initializer, this function just initializes an object and can be invoked before the kernel is initialized. </dd></dl>

<p>Definition at line <a class="el" href="hal__mmc__spi_8c_source.html#l00393">393</a> of file <a class="el" href="hal__mmc__spi_8c_source.html">hal_mmc_spi.c</a>.</p>

<p>References <a class="el" href="group___i_o___b_l_o_c_k.html#gga1f189b51767bd55ccc145f43b9a363b9a3342157627fffeacb36b858f4ac1e0d8">BLK_STOP</a>, <a class="el" href="struct_m_m_c_driver.html#aa26a6d1ed19b511139179a4c168f26e2">MMCDriver::config</a>, <a class="el" href="group___m_m_c___s_p_i.html#ga99f29fc5df8d087e9de16b2c98ee55b0">mmc_vmt</a>, and <a class="el" href="struct_m_m_c_driver.html#a61037135d2b5c58575d13d7929e25516">MMCDriver::vmt</a>.</p>

</div>
</div>
<a class="anchor" id="ga076506461b42641a9fe632cc3e72dab5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mmcStart </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *&#160;</td>
          <td class="paramname"><em>mmcp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_m_m_c_config.html">MMCConfig</a> *&#160;</td>
          <td class="paramname"><em>config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures and activates the MMC peripheral. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mmcp</td><td>pointer to the <code><a class="el" href="struct_m_m_c_driver.html" title="Structure representing a MMC/SD over SPI driver. ">MMCDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">config</td><td>pointer to the <code><a class="el" href="struct_m_m_c_config.html" title="MMC/SD over SPI driver configuration structure. ">MMCConfig</a></code> object.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Normal API, this function can be invoked by regular system threads but not from within a lock zone. </dd></dl>

<p>Definition at line <a class="el" href="hal__mmc__spi_8c_source.html#l00409">409</a> of file <a class="el" href="hal__mmc__spi_8c_source.html">hal_mmc_spi.c</a>.</p>

<p>References <a class="el" href="group___i_o___b_l_o_c_k.html#gga1f189b51767bd55ccc145f43b9a363b9aeb430f851f699da53ba7589808edf948">BLK_ACTIVE</a>, <a class="el" href="group___i_o___b_l_o_c_k.html#gga1f189b51767bd55ccc145f43b9a363b9a3342157627fffeacb36b858f4ac1e0d8">BLK_STOP</a>, <a class="el" href="struct_m_m_c_driver.html#aa26a6d1ed19b511139179a4c168f26e2">MMCDriver::config</a>, <a class="el" href="group___o_s_a_l.html#gad2c73ec79f38fe705784c3b51426fef7">osalDbgAssert</a>, and <a class="el" href="group___o_s_a_l.html#gadf56fc259582a041ae47bcabe5f49b00">osalDbgCheck</a>.</p>

</div>
</div>
<a class="anchor" id="ga27833cde77794f914e4802c7e65281a5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mmcStop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *&#160;</td>
          <td class="paramname"><em>mmcp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disables the MMC peripheral. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mmcp</td><td>pointer to the <code><a class="el" href="struct_m_m_c_driver.html" title="Structure representing a MMC/SD over SPI driver. ">MMCDriver</a></code> object</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Normal API, this function can be invoked by regular system threads but not from within a lock zone. </dd></dl>

<p>Definition at line <a class="el" href="hal__mmc__spi_8c_source.html#l00426">426</a> of file <a class="el" href="hal__mmc__spi_8c_source.html">hal_mmc_spi.c</a>.</p>

<p>References <a class="el" href="group___i_o___b_l_o_c_k.html#gga1f189b51767bd55ccc145f43b9a363b9aeb430f851f699da53ba7589808edf948">BLK_ACTIVE</a>, <a class="el" href="group___i_o___b_l_o_c_k.html#gga1f189b51767bd55ccc145f43b9a363b9a3342157627fffeacb36b858f4ac1e0d8">BLK_STOP</a>, <a class="el" href="struct_m_m_c_driver.html#aa26a6d1ed19b511139179a4c168f26e2">MMCDriver::config</a>, <a class="el" href="group___o_s_a_l.html#gad2c73ec79f38fe705784c3b51426fef7">osalDbgAssert</a>, <a class="el" href="group___o_s_a_l.html#gadf56fc259582a041ae47bcabe5f49b00">osalDbgCheck</a>, <a class="el" href="struct_m_m_c_config.html#afa6149822441abfcb6ee6b92ec00072d">MMCConfig::spip</a>, and <a class="el" href="group___s_p_i.html#gad3a359eea03e68e95899886ae93a06e4">spiStop()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_m_c___s_p_i_ga27833cde77794f914e4802c7e65281a5_cgraph.png" border="0" usemap="#group___m_m_c___s_p_i_ga27833cde77794f914e4802c7e65281a5_cgraph" alt=""/></div>
<map name="group___m_m_c___s_p_i_ga27833cde77794f914e4802c7e65281a5_cgraph" id="group___m_m_c___s_p_i_ga27833cde77794f914e4802c7e65281a5_cgraph">
<area shape="rect" id="node2" href="group___s_p_i.html#gad3a359eea03e68e95899886ae93a06e4" title="Deactivates the SPI peripheral. " alt="" coords="120,53,177,77"/>
<area shape="rect" id="node3" href="group___o_s_a_l.html#ga0cb5e528b0114b4ca61c2eb65a0515fa" title="Enters a critical zone from thread context. " alt="" coords="231,5,311,29"/>
<area shape="rect" id="node4" href="group___s_p_i.html#ga8d6b2e0764d39b892b51e6abe4923f80" title="Deactivates the SPI peripheral. " alt="" coords="232,53,309,77"/>
<area shape="rect" id="node5" href="group___o_s_a_l.html#ga17dbf4a1761019b8d94f43832c506543" title="Leaves a critical zone from thread context. " alt="" coords="225,101,316,125"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaf0bcf9f5d4e2ec9854101905c81145fb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mmcConnect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *&#160;</td>
          <td class="paramname"><em>mmcp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs the initialization procedure on the inserted card. </p>
<p>This function should be invoked when a card is inserted and brings the driver in the <code>MMC_READY</code> state where it is possible to perform read and write operations. </p><dl class="section note"><dt>Note</dt><dd>It is possible to invoke this function from the insertion event handler.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mmcp</td><td>pointer to the <code><a class="el" href="struct_m_m_c_driver.html" title="Structure representing a MMC/SD over SPI driver. ">MMCDriver</a></code> object</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL_SUCCESS</td><td>the operation succeeded and the driver is now in the <code>MMC_READY</code> state. </td></tr>
    <tr><td class="paramname">HAL_FAILED</td><td>the operation failed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Normal API, this function can be invoked by regular system threads but not from within a lock zone. </dd></dl>

<p>Definition at line <a class="el" href="hal__mmc__spi_8c_source.html#l00454">454</a> of file <a class="el" href="hal__mmc__spi_8c_source.html">hal_mmc_spi.c</a>.</p>

<p>References <a class="el" href="group___m_m_c_s_d.html#gaa4d54721136e91e1d588502848e96774">_mmcsd_get_capacity()</a>, <a class="el" href="group___i_o___b_l_o_c_k.html#gga1f189b51767bd55ccc145f43b9a363b9aeb430f851f699da53ba7589808edf948">BLK_ACTIVE</a>, <a class="el" href="group___i_o___b_l_o_c_k.html#gga1f189b51767bd55ccc145f43b9a363b9a362f871d23123b518baedc38f0d8e99a">BLK_CONNECTING</a>, <a class="el" href="group___i_o___b_l_o_c_k.html#gga1f189b51767bd55ccc145f43b9a363b9a97b7a7ddb6b18c693d1f52e7163eed0f">BLK_READY</a>, <a class="el" href="struct_m_m_c_driver.html#aa26a6d1ed19b511139179a4c168f26e2">MMCDriver::config</a>, <a class="el" href="struct_m_m_c_config.html#ab104cbf423a64731175510b201ae9f95">MMCConfig::hscfg</a>, <a class="el" href="struct_m_m_c_config.html#a12112f6462b2579914729e3f2e88b37a">MMCConfig::lscfg</a>, <a class="el" href="group___m_m_c_s_d.html#gace1da627ffbd5b8c176225f6e11bc13a">MMCSD_BLOCK_SIZE</a>, <a class="el" href="group___m_m_c_s_d.html#gac19a3b57fbbb73b328c6720646dff99e">MMCSD_CMD8_PATTERN</a>, <a class="el" href="group___o_s_a_l.html#gad2c73ec79f38fe705784c3b51426fef7">osalDbgAssert</a>, <a class="el" href="group___o_s_a_l.html#gadf56fc259582a041ae47bcabe5f49b00">osalDbgCheck</a>, <a class="el" href="group___o_s_a_l.html#gaf64de511f36e28b0365d138d5e281f5b">osalThreadSleepMilliseconds</a>, <a class="el" href="group___m_m_c___s_p_i.html#ga2a732d526a3c06a4827d814b7180d7b2">read_CxD()</a>, <a class="el" href="group___m_m_c___s_p_i.html#gaf83dd60ca0bc01e456d965724b3f4a5a">send_command_R1()</a>, <a class="el" href="group___m_m_c___s_p_i.html#gac90fd06bfd1e8636f57a8a1dbd2f7691">send_command_R3()</a>, <a class="el" href="group___s_p_i.html#ga43889a7d4c473f653596f8c0acafce2a">spiIgnore()</a>, <a class="el" href="struct_m_m_c_config.html#afa6149822441abfcb6ee6b92ec00072d">MMCConfig::spip</a>, <a class="el" href="group___s_p_i.html#ga6752c9f736f8de774a5bef6dfe2aae2e">spiStart()</a>, and <a class="el" href="group___s_p_i.html#gad3a359eea03e68e95899886ae93a06e4">spiStop()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_m_c___s_p_i_gaf0bcf9f5d4e2ec9854101905c81145fb_cgraph.png" border="0" usemap="#group___m_m_c___s_p_i_gaf0bcf9f5d4e2ec9854101905c81145fb_cgraph" alt=""/></div>
<map name="group___m_m_c___s_p_i_gaf0bcf9f5d4e2ec9854101905c81145fb_cgraph" id="group___m_m_c___s_p_i_gaf0bcf9f5d4e2ec9854101905c81145fb_cgraph">
<area shape="rect" id="node2" href="group___m_m_c_s_d.html#gaa4d54721136e91e1d588502848e96774" title="Extract card capacity from a CSD. " alt="" coords="139,5,265,29"/>
<area shape="rect" id="node4" href="group___m_m_c___s_p_i.html#ga2a732d526a3c06a4827d814b7180d7b2" title="Reads the CSD. " alt="" coords="337,204,408,228"/>
<area shape="rect" id="node10" href="group___s_p_i.html#ga43889a7d4c473f653596f8c0acafce2a" title="Ignores data on the SPI bus. " alt="" coords="607,112,674,136"/>
<area shape="rect" id="node13" href="group___m_m_c___s_p_i.html#gaf83dd60ca0bc01e456d965724b3f4a5a" title="Sends a command an returns a single byte response. " alt="" coords="313,252,432,276"/>
<area shape="rect" id="node14" href="group___m_m_c___s_p_i.html#gac90fd06bfd1e8636f57a8a1dbd2f7691" title="Sends a command which returns a five bytes response (R3). " alt="" coords="143,303,261,327"/>
<area shape="rect" id="node16" href="group___s_p_i.html#ga6752c9f736f8de774a5bef6dfe2aae2e" title="Configures and activates the SPI peripheral. " alt="" coords="611,497,670,521"/>
<area shape="rect" id="node18" href="group___s_p_i.html#gad3a359eea03e68e95899886ae93a06e4" title="Deactivates the SPI peripheral. " alt="" coords="612,449,669,473"/>
<area shape="rect" id="node3" href="group___m_m_c_s_d.html#ga88144aba611c42712440a7af1c567eb1" title="Gets a bit field from a words array. " alt="" coords="318,5,427,29"/>
<area shape="rect" id="node5" href="group___m_m_c___s_p_i.html#ga3862a084e567aa0e36d86038f504b7b5" title="Receives a single byte response. " alt="" coords="492,301,544,325"/>
<area shape="rect" id="node6" href="group___s_p_i.html#gadd99ad823b391dde114f04dedafe5e80" title="Receives data from the SPI bus. " alt="" coords="604,300,677,324"/>
<area shape="rect" id="node9" href="group___m_m_c___s_p_i.html#ga9e3bc1849600a89d28eac5aaa8e5ea14" title="Sends a command header. " alt="" coords="485,253,551,277"/>
<area shape="rect" id="node11" href="group___s_p_i.html#ga00809152c869db80192aa3e04266a99a" title="Asserts the slave select signal and prepares for transfers. " alt="" coords="486,400,550,424"/>
<area shape="rect" id="node12" href="group___s_p_i.html#gae291c012872da9c89dec23581f701b5f" title="Deasserts the slave select signal. " alt="" coords="480,155,556,179"/>
<area shape="rect" id="node7" href="group___o_s_a_l.html#ga0cb5e528b0114b4ca61c2eb65a0515fa" title="Enters a critical zone from thread context. " alt="" coords="731,387,811,411"/>
<area shape="rect" id="node8" href="group___o_s_a_l.html#ga17dbf4a1761019b8d94f43832c506543" title="Leaves a critical zone from thread context. " alt="" coords="725,325,816,349"/>
<area shape="rect" id="node15" href="group___m_m_c___s_p_i.html#gadcc5410f945c25c65643294faa56df48" title="Receives a three byte response. " alt="" coords="347,351,399,375"/>
<area shape="rect" id="node17" href="group___s_p_i.html#gaf35495bd4459608ae22a3f728fd4697b" title="Configures and activates the SPI peripheral. " alt="" coords="731,497,810,521"/>
<area shape="rect" id="node19" href="group___s_p_i.html#ga8d6b2e0764d39b892b51e6abe4923f80" title="Deactivates the SPI peripheral. " alt="" coords="732,449,809,473"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga20a509767690b2699f93822c85410ae6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mmcDisconnect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *&#160;</td>
          <td class="paramname"><em>mmcp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Brings the driver in a state safe for card removal. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mmcp</td><td>pointer to the <code><a class="el" href="struct_m_m_c_driver.html" title="Structure representing a MMC/SD over SPI driver. ">MMCDriver</a></code> object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL_SUCCESS</td><td>the operation succeeded and the driver is now in the <code>MMC_INSERTED</code> state. </td></tr>
    <tr><td class="paramname">HAL_FAILED</td><td>the operation failed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Normal API, this function can be invoked by regular system threads but not from within a lock zone. </dd></dl>

<p>Definition at line <a class="el" href="hal__mmc__spi_8c_source.html#l00576">576</a> of file <a class="el" href="hal__mmc__spi_8c_source.html">hal_mmc_spi.c</a>.</p>

<p>References <a class="el" href="group___i_o___b_l_o_c_k.html#gga1f189b51767bd55ccc145f43b9a363b9aeb430f851f699da53ba7589808edf948">BLK_ACTIVE</a>, <a class="el" href="group___i_o___b_l_o_c_k.html#gga1f189b51767bd55ccc145f43b9a363b9aaf1cbda180cfdc42751cb06d54372f7f">BLK_DISCONNECTING</a>, <a class="el" href="group___i_o___b_l_o_c_k.html#gga1f189b51767bd55ccc145f43b9a363b9a97b7a7ddb6b18c693d1f52e7163eed0f">BLK_READY</a>, <a class="el" href="struct_m_m_c_driver.html#aa26a6d1ed19b511139179a4c168f26e2">MMCDriver::config</a>, <a class="el" href="struct_m_m_c_config.html#ab104cbf423a64731175510b201ae9f95">MMCConfig::hscfg</a>, <a class="el" href="group___o_s_a_l.html#gad2c73ec79f38fe705784c3b51426fef7">osalDbgAssert</a>, <a class="el" href="group___o_s_a_l.html#gadf56fc259582a041ae47bcabe5f49b00">osalDbgCheck</a>, <a class="el" href="group___o_s_a_l.html#ga0cb5e528b0114b4ca61c2eb65a0515fa">osalSysLock()</a>, <a class="el" href="group___o_s_a_l.html#ga17dbf4a1761019b8d94f43832c506543">osalSysUnlock()</a>, <a class="el" href="struct_m_m_c_config.html#afa6149822441abfcb6ee6b92ec00072d">MMCConfig::spip</a>, <a class="el" href="group___s_p_i.html#ga6752c9f736f8de774a5bef6dfe2aae2e">spiStart()</a>, <a class="el" href="group___s_p_i.html#gad3a359eea03e68e95899886ae93a06e4">spiStop()</a>, and <a class="el" href="group___m_m_c___s_p_i.html#gab09e4d4341eff30aadfbc5da9ec804e4">sync()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_m_c___s_p_i_ga20a509767690b2699f93822c85410ae6_cgraph.png" border="0" usemap="#group___m_m_c___s_p_i_ga20a509767690b2699f93822c85410ae6_cgraph" alt=""/></div>
<map name="group___m_m_c___s_p_i_ga20a509767690b2699f93822c85410ae6_cgraph" id="group___m_m_c___s_p_i_ga20a509767690b2699f93822c85410ae6_cgraph">
<area shape="rect" id="node2" href="group___o_s_a_l.html#ga0cb5e528b0114b4ca61c2eb65a0515fa" title="Enters a critical zone from thread context. " alt="" coords="371,128,451,152"/>
<area shape="rect" id="node3" href="group___o_s_a_l.html#ga17dbf4a1761019b8d94f43832c506543" title="Leaves a critical zone from thread context. " alt="" coords="365,188,456,212"/>
<area shape="rect" id="node4" href="group___s_p_i.html#ga6752c9f736f8de774a5bef6dfe2aae2e" title="Configures and activates the SPI peripheral. " alt="" coords="250,5,309,29"/>
<area shape="rect" id="node6" href="group___s_p_i.html#gad3a359eea03e68e95899886ae93a06e4" title="Deactivates the SPI peripheral. " alt="" coords="251,299,308,323"/>
<area shape="rect" id="node8" href="group___m_m_c___s_p_i.html#gab09e4d4341eff30aadfbc5da9ec804e4" title="Waits that the card reaches an idle state. " alt="" coords="151,152,193,176"/>
<area shape="rect" id="node5" href="group___s_p_i.html#gaf35495bd4459608ae22a3f728fd4697b" title="Configures and activates the SPI peripheral. " alt="" coords="371,5,450,29"/>
<area shape="rect" id="node7" href="group___s_p_i.html#ga8d6b2e0764d39b892b51e6abe4923f80" title="Deactivates the SPI peripheral. " alt="" coords="372,299,449,323"/>
<area shape="rect" id="node9" href="group___s_p_i.html#gadd99ad823b391dde114f04dedafe5e80" title="Receives data from the SPI bus. " alt="" coords="243,104,316,128"/>
<area shape="rect" id="node10" href="group___s_p_i.html#ga00809152c869db80192aa3e04266a99a" title="Asserts the slave select signal and prepares for transfers. " alt="" coords="247,152,311,176"/>
<area shape="rect" id="node11" href="group___s_p_i.html#gae291c012872da9c89dec23581f701b5f" title="Deasserts the slave select signal. " alt="" coords="241,200,317,224"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga3f2546dc232233d216fee95be301a622"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mmcStartSequentialRead </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *&#160;</td>
          <td class="paramname"><em>mmcp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>startblk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts a sequential read. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mmcp</td><td>pointer to the <code><a class="el" href="struct_m_m_c_driver.html" title="Structure representing a MMC/SD over SPI driver. ">MMCDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">startblk</td><td>first block to read</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL_SUCCESS</td><td>the operation succeeded. </td></tr>
    <tr><td class="paramname">HAL_FAILED</td><td>the operation failed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Normal API, this function can be invoked by regular system threads but not from within a lock zone. </dd></dl>

<p>Definition at line <a class="el" href="hal__mmc__spi_8c_source.html#l00611">611</a> of file <a class="el" href="hal__mmc__spi_8c_source.html">hal_mmc_spi.c</a>.</p>

<p>References <a class="el" href="group___i_o___b_l_o_c_k.html#gga1f189b51767bd55ccc145f43b9a363b9ab1db560d5a0a6d7aff6b522c605004ff">BLK_READING</a>, <a class="el" href="group___i_o___b_l_o_c_k.html#gga1f189b51767bd55ccc145f43b9a363b9a97b7a7ddb6b18c693d1f52e7163eed0f">BLK_READY</a>, <a class="el" href="struct_m_m_c_driver.html#aa26a6d1ed19b511139179a4c168f26e2">MMCDriver::config</a>, <a class="el" href="struct_m_m_c_config.html#ab104cbf423a64731175510b201ae9f95">MMCConfig::hscfg</a>, <a class="el" href="group___m_m_c_s_d.html#gace1da627ffbd5b8c176225f6e11bc13a">MMCSD_BLOCK_SIZE</a>, <a class="el" href="group___o_s_a_l.html#gad2c73ec79f38fe705784c3b51426fef7">osalDbgAssert</a>, <a class="el" href="group___o_s_a_l.html#gadf56fc259582a041ae47bcabe5f49b00">osalDbgCheck</a>, <a class="el" href="group___m_m_c___s_p_i.html#ga3862a084e567aa0e36d86038f504b7b5">recvr1()</a>, <a class="el" href="group___m_m_c___s_p_i.html#ga9e3bc1849600a89d28eac5aaa8e5ea14">send_hdr()</a>, <a class="el" href="struct_m_m_c_config.html#afa6149822441abfcb6ee6b92ec00072d">MMCConfig::spip</a>, <a class="el" href="group___s_p_i.html#ga00809152c869db80192aa3e04266a99a">spiSelect()</a>, <a class="el" href="group___s_p_i.html#ga6752c9f736f8de774a5bef6dfe2aae2e">spiStart()</a>, and <a class="el" href="group___s_p_i.html#gad3a359eea03e68e95899886ae93a06e4">spiStop()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_m_c___s_p_i_ga3f2546dc232233d216fee95be301a622_cgraph.png" border="0" usemap="#group___m_m_c___s_p_i_ga3f2546dc232233d216fee95be301a622_cgraph" alt=""/></div>
<map name="group___m_m_c___s_p_i_ga3f2546dc232233d216fee95be301a622_cgraph" id="group___m_m_c___s_p_i_ga3f2546dc232233d216fee95be301a622_cgraph">
<area shape="rect" id="node2" href="group___m_m_c___s_p_i.html#ga3862a084e567aa0e36d86038f504b7b5" title="Receives a single byte response. " alt="" coords="205,5,257,29"/>
<area shape="rect" id="node6" href="group___m_m_c___s_p_i.html#ga9e3bc1849600a89d28eac5aaa8e5ea14" title="Sends a command header. " alt="" coords="197,103,264,127"/>
<area shape="rect" id="node10" href="group___s_p_i.html#ga00809152c869db80192aa3e04266a99a" title="Asserts the slave select signal and prepares for transfers. " alt="" coords="407,176,471,200"/>
<area shape="rect" id="node11" href="group___s_p_i.html#ga6752c9f736f8de774a5bef6dfe2aae2e" title="Configures and activates the SPI peripheral. " alt="" coords="410,272,469,296"/>
<area shape="rect" id="node13" href="group___s_p_i.html#gad3a359eea03e68e95899886ae93a06e4" title="Deactivates the SPI peripheral. " alt="" coords="411,224,468,248"/>
<area shape="rect" id="node3" href="group___s_p_i.html#gadd99ad823b391dde114f04dedafe5e80" title="Receives data from the SPI bus. " alt="" coords="403,55,476,79"/>
<area shape="rect" id="node4" href="group___o_s_a_l.html#ga0cb5e528b0114b4ca61c2eb65a0515fa" title="Enters a critical zone from thread context. " alt="" coords="529,128,609,152"/>
<area shape="rect" id="node5" href="group___o_s_a_l.html#ga17dbf4a1761019b8d94f43832c506543" title="Leaves a critical zone from thread context. " alt="" coords="524,176,615,200"/>
<area shape="rect" id="node7" href="group___m_m_c___s_p_i.html#gac82b7e209601c890c0d1587cefaf0813" title="Calculate the MMC standard CRC&#45;7 based on a lookup table. " alt="" coords="312,77,355,101"/>
<area shape="rect" id="node8" href="group___s_p_i.html#ga382cfbdffd2df57cf3843d45164e8bfc" title="Sends data over the SPI bus. " alt="" coords="409,128,469,152"/>
<area shape="rect" id="node9" href="group___m_m_c___s_p_i.html#ga2047c3d4f7ce72dcb6c4942f57e92600" title="Waits an idle condition. " alt="" coords="313,29,354,53"/>
<area shape="rect" id="node12" href="group___s_p_i.html#gaf35495bd4459608ae22a3f728fd4697b" title="Configures and activates the SPI peripheral. " alt="" coords="530,272,609,296"/>
<area shape="rect" id="node14" href="group___s_p_i.html#ga8d6b2e0764d39b892b51e6abe4923f80" title="Deactivates the SPI peripheral. " alt="" coords="531,224,608,248"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga76dc90bd3c90da940be9badb81f860eb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mmcSequentialRead </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *&#160;</td>
          <td class="paramname"><em>mmcp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads a block within a sequential read operation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mmcp</td><td>pointer to the <code><a class="el" href="struct_m_m_c_driver.html" title="Structure representing a MMC/SD over SPI driver. ">MMCDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buffer</td><td>pointer to the read buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL_SUCCESS</td><td>the operation succeeded. </td></tr>
    <tr><td class="paramname">HAL_FAILED</td><td>the operation failed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Normal API, this function can be invoked by regular system threads but not from within a lock zone. </dd></dl>

<p>Definition at line <a class="el" href="hal__mmc__spi_8c_source.html#l00651">651</a> of file <a class="el" href="hal__mmc__spi_8c_source.html">hal_mmc_spi.c</a>.</p>

<p>References <a class="el" href="group___i_o___b_l_o_c_k.html#gga1f189b51767bd55ccc145f43b9a363b9ab1db560d5a0a6d7aff6b522c605004ff">BLK_READING</a>, <a class="el" href="group___i_o___b_l_o_c_k.html#gga1f189b51767bd55ccc145f43b9a363b9a97b7a7ddb6b18c693d1f52e7163eed0f">BLK_READY</a>, <a class="el" href="struct_m_m_c_driver.html#aa26a6d1ed19b511139179a4c168f26e2">MMCDriver::config</a>, <a class="el" href="group___m_m_c_s_d.html#gace1da627ffbd5b8c176225f6e11bc13a">MMCSD_BLOCK_SIZE</a>, <a class="el" href="group___o_s_a_l.html#gadf56fc259582a041ae47bcabe5f49b00">osalDbgCheck</a>, <a class="el" href="group___s_p_i.html#ga43889a7d4c473f653596f8c0acafce2a">spiIgnore()</a>, <a class="el" href="struct_m_m_c_config.html#afa6149822441abfcb6ee6b92ec00072d">MMCConfig::spip</a>, <a class="el" href="group___s_p_i.html#gadd99ad823b391dde114f04dedafe5e80">spiReceive()</a>, <a class="el" href="group___s_p_i.html#gad3a359eea03e68e95899886ae93a06e4">spiStop()</a>, and <a class="el" href="group___s_p_i.html#gae291c012872da9c89dec23581f701b5f">spiUnselect()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_m_c___s_p_i_ga76dc90bd3c90da940be9badb81f860eb_cgraph.png" border="0" usemap="#group___m_m_c___s_p_i_ga76dc90bd3c90da940be9badb81f860eb_cgraph" alt=""/></div>
<map name="group___m_m_c___s_p_i_ga76dc90bd3c90da940be9badb81f860eb_cgraph" id="group___m_m_c___s_p_i_ga76dc90bd3c90da940be9badb81f860eb_cgraph">
<area shape="rect" id="node2" href="group___s_p_i.html#ga43889a7d4c473f653596f8c0acafce2a" title="Ignores data on the SPI bus. " alt="" coords="179,5,246,29"/>
<area shape="rect" id="node6" href="group___s_p_i.html#gadd99ad823b391dde114f04dedafe5e80" title="Receives data from the SPI bus. " alt="" coords="176,53,249,77"/>
<area shape="rect" id="node7" href="group___s_p_i.html#gad3a359eea03e68e95899886ae93a06e4" title="Deactivates the SPI peripheral. " alt="" coords="184,149,241,173"/>
<area shape="rect" id="node9" href="group___s_p_i.html#gae291c012872da9c89dec23581f701b5f" title="Deasserts the slave select signal. " alt="" coords="175,101,251,125"/>
<area shape="rect" id="node3" href="group___o_s_a_l.html#ga0cb5e528b0114b4ca61c2eb65a0515fa" title="Enters a critical zone from thread context. " alt="" coords="321,53,401,77"/>
<area shape="rect" id="node4" href="group___o_s_a_l.html#ga49573c45ca88cd172ee03da252f69ae4" title="Sends the current thread sleeping and sets a reference variable. " alt="" coords="299,5,424,29"/>
<area shape="rect" id="node5" href="group___o_s_a_l.html#ga17dbf4a1761019b8d94f43832c506543" title="Leaves a critical zone from thread context. " alt="" coords="316,101,407,125"/>
<area shape="rect" id="node8" href="group___s_p_i.html#ga8d6b2e0764d39b892b51e6abe4923f80" title="Deactivates the SPI peripheral. " alt="" coords="323,149,400,173"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaa89fef7df608c54026170a9d9cfe1c48"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mmcStopSequentialRead </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *&#160;</td>
          <td class="paramname"><em>mmcp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stops a sequential read gracefully. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mmcp</td><td>pointer to the <code><a class="el" href="struct_m_m_c_driver.html" title="Structure representing a MMC/SD over SPI driver. ">MMCDriver</a></code> object</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL_SUCCESS</td><td>the operation succeeded. </td></tr>
    <tr><td class="paramname">HAL_FAILED</td><td>the operation failed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Normal API, this function can be invoked by regular system threads but not from within a lock zone. </dd></dl>

<p>Definition at line <a class="el" href="hal__mmc__spi_8c_source.html#l00687">687</a> of file <a class="el" href="hal__mmc__spi_8c_source.html">hal_mmc_spi.c</a>.</p>

<p>References <a class="el" href="group___i_o___b_l_o_c_k.html#gga1f189b51767bd55ccc145f43b9a363b9ab1db560d5a0a6d7aff6b522c605004ff">BLK_READING</a>, <a class="el" href="group___i_o___b_l_o_c_k.html#gga1f189b51767bd55ccc145f43b9a363b9a97b7a7ddb6b18c693d1f52e7163eed0f">BLK_READY</a>, <a class="el" href="struct_m_m_c_driver.html#aa26a6d1ed19b511139179a4c168f26e2">MMCDriver::config</a>, <a class="el" href="group___o_s_a_l.html#gadf56fc259582a041ae47bcabe5f49b00">osalDbgCheck</a>, <a class="el" href="group___m_m_c___s_p_i.html#ga3862a084e567aa0e36d86038f504b7b5">recvr1()</a>, <a class="el" href="struct_m_m_c_config.html#afa6149822441abfcb6ee6b92ec00072d">MMCConfig::spip</a>, <a class="el" href="group___s_p_i.html#ga382cfbdffd2df57cf3843d45164e8bfc">spiSend()</a>, and <a class="el" href="group___s_p_i.html#gae291c012872da9c89dec23581f701b5f">spiUnselect()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_m_c___s_p_i_gaa89fef7df608c54026170a9d9cfe1c48_cgraph.png" border="0" usemap="#group___m_m_c___s_p_i_gaa89fef7df608c54026170a9d9cfe1c48_cgraph" alt=""/></div>
<map name="group___m_m_c___s_p_i_gaa89fef7df608c54026170a9d9cfe1c48_cgraph" id="group___m_m_c___s_p_i_gaa89fef7df608c54026170a9d9cfe1c48_cgraph">
<area shape="rect" id="node2" href="group___m_m_c___s_p_i.html#ga3862a084e567aa0e36d86038f504b7b5" title="Receives a single byte response. " alt="" coords="196,53,248,77"/>
<area shape="rect" id="node7" href="group___s_p_i.html#ga382cfbdffd2df57cf3843d45164e8bfc" title="Sends data over the SPI bus. " alt="" coords="304,5,364,29"/>
<area shape="rect" id="node8" href="group___s_p_i.html#gae291c012872da9c89dec23581f701b5f" title="Deasserts the slave select signal. " alt="" coords="296,101,372,125"/>
<area shape="rect" id="node3" href="group___s_p_i.html#gadd99ad823b391dde114f04dedafe5e80" title="Receives data from the SPI bus. " alt="" coords="297,53,371,77"/>
<area shape="rect" id="node4" href="group___o_s_a_l.html#ga0cb5e528b0114b4ca61c2eb65a0515fa" title="Enters a critical zone from thread context. " alt="" coords="443,101,523,125"/>
<area shape="rect" id="node5" href="group___o_s_a_l.html#ga49573c45ca88cd172ee03da252f69ae4" title="Sends the current thread sleeping and sets a reference variable. " alt="" coords="420,5,545,29"/>
<area shape="rect" id="node6" href="group___o_s_a_l.html#ga17dbf4a1761019b8d94f43832c506543" title="Leaves a critical zone from thread context. " alt="" coords="437,53,528,77"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga087ca365c8638b313beec0bfb6dca098"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mmcStartSequentialWrite </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *&#160;</td>
          <td class="paramname"><em>mmcp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>startblk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts a sequential write. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mmcp</td><td>pointer to the <code><a class="el" href="struct_m_m_c_driver.html" title="Structure representing a MMC/SD over SPI driver. ">MMCDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">startblk</td><td>first block to write</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL_SUCCESS</td><td>the operation succeeded. </td></tr>
    <tr><td class="paramname">HAL_FAILED</td><td>the operation failed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Normal API, this function can be invoked by regular system threads but not from within a lock zone. </dd></dl>

<p>Definition at line <a class="el" href="hal__mmc__spi_8c_source.html#l00721">721</a> of file <a class="el" href="hal__mmc__spi_8c_source.html">hal_mmc_spi.c</a>.</p>

<p>References <a class="el" href="group___i_o___b_l_o_c_k.html#gga1f189b51767bd55ccc145f43b9a363b9a97b7a7ddb6b18c693d1f52e7163eed0f">BLK_READY</a>, <a class="el" href="group___i_o___b_l_o_c_k.html#gga1f189b51767bd55ccc145f43b9a363b9a081cbd0b13e70eced066b9465be782f5">BLK_WRITING</a>, <a class="el" href="struct_m_m_c_driver.html#aa26a6d1ed19b511139179a4c168f26e2">MMCDriver::config</a>, <a class="el" href="struct_m_m_c_config.html#ab104cbf423a64731175510b201ae9f95">MMCConfig::hscfg</a>, <a class="el" href="group___m_m_c_s_d.html#gace1da627ffbd5b8c176225f6e11bc13a">MMCSD_BLOCK_SIZE</a>, <a class="el" href="group___o_s_a_l.html#gad2c73ec79f38fe705784c3b51426fef7">osalDbgAssert</a>, <a class="el" href="group___o_s_a_l.html#gadf56fc259582a041ae47bcabe5f49b00">osalDbgCheck</a>, <a class="el" href="group___m_m_c___s_p_i.html#ga3862a084e567aa0e36d86038f504b7b5">recvr1()</a>, <a class="el" href="group___m_m_c___s_p_i.html#ga9e3bc1849600a89d28eac5aaa8e5ea14">send_hdr()</a>, <a class="el" href="struct_m_m_c_config.html#afa6149822441abfcb6ee6b92ec00072d">MMCConfig::spip</a>, <a class="el" href="group___s_p_i.html#ga00809152c869db80192aa3e04266a99a">spiSelect()</a>, <a class="el" href="group___s_p_i.html#ga6752c9f736f8de774a5bef6dfe2aae2e">spiStart()</a>, and <a class="el" href="group___s_p_i.html#gad3a359eea03e68e95899886ae93a06e4">spiStop()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_m_c___s_p_i_ga087ca365c8638b313beec0bfb6dca098_cgraph.png" border="0" usemap="#group___m_m_c___s_p_i_ga087ca365c8638b313beec0bfb6dca098_cgraph" alt=""/></div>
<map name="group___m_m_c___s_p_i_ga087ca365c8638b313beec0bfb6dca098_cgraph" id="group___m_m_c___s_p_i_ga087ca365c8638b313beec0bfb6dca098_cgraph">
<area shape="rect" id="node2" href="group___m_m_c___s_p_i.html#ga3862a084e567aa0e36d86038f504b7b5" title="Receives a single byte response. " alt="" coords="203,5,255,29"/>
<area shape="rect" id="node6" href="group___m_m_c___s_p_i.html#ga9e3bc1849600a89d28eac5aaa8e5ea14" title="Sends a command header. " alt="" coords="196,103,263,127"/>
<area shape="rect" id="node10" href="group___s_p_i.html#ga00809152c869db80192aa3e04266a99a" title="Asserts the slave select signal and prepares for transfers. " alt="" coords="406,176,470,200"/>
<area shape="rect" id="node11" href="group___s_p_i.html#ga6752c9f736f8de774a5bef6dfe2aae2e" title="Configures and activates the SPI peripheral. " alt="" coords="409,272,467,296"/>
<area shape="rect" id="node13" href="group___s_p_i.html#gad3a359eea03e68e95899886ae93a06e4" title="Deactivates the SPI peripheral. " alt="" coords="409,224,467,248"/>
<area shape="rect" id="node3" href="group___s_p_i.html#gadd99ad823b391dde114f04dedafe5e80" title="Receives data from the SPI bus. " alt="" coords="401,55,475,79"/>
<area shape="rect" id="node4" href="group___o_s_a_l.html#ga0cb5e528b0114b4ca61c2eb65a0515fa" title="Enters a critical zone from thread context. " alt="" coords="528,128,608,152"/>
<area shape="rect" id="node5" href="group___o_s_a_l.html#ga17dbf4a1761019b8d94f43832c506543" title="Leaves a critical zone from thread context. " alt="" coords="523,176,613,200"/>
<area shape="rect" id="node7" href="group___m_m_c___s_p_i.html#gac82b7e209601c890c0d1587cefaf0813" title="Calculate the MMC standard CRC&#45;7 based on a lookup table. " alt="" coords="311,77,353,101"/>
<area shape="rect" id="node8" href="group___s_p_i.html#ga382cfbdffd2df57cf3843d45164e8bfc" title="Sends data over the SPI bus. " alt="" coords="408,128,468,152"/>
<area shape="rect" id="node9" href="group___m_m_c___s_p_i.html#ga2047c3d4f7ce72dcb6c4942f57e92600" title="Waits an idle condition. " alt="" coords="311,29,353,53"/>
<area shape="rect" id="node12" href="group___s_p_i.html#gaf35495bd4459608ae22a3f728fd4697b" title="Configures and activates the SPI peripheral. " alt="" coords="529,272,607,296"/>
<area shape="rect" id="node14" href="group___s_p_i.html#ga8d6b2e0764d39b892b51e6abe4923f80" title="Deactivates the SPI peripheral. " alt="" coords="529,224,607,248"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga76efb17f1cff7b0222356507e3002dec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mmcSequentialWrite </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *&#160;</td>
          <td class="paramname"><em>mmcp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes a block within a sequential write operation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mmcp</td><td>pointer to the <code><a class="el" href="struct_m_m_c_driver.html" title="Structure representing a MMC/SD over SPI driver. ">MMCDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buffer</td><td>pointer to the write buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL_SUCCESS</td><td>the operation succeeded. </td></tr>
    <tr><td class="paramname">HAL_FAILED</td><td>the operation failed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Normal API, this function can be invoked by regular system threads but not from within a lock zone. </dd></dl>

<p>Definition at line <a class="el" href="hal__mmc__spi_8c_source.html#l00759">759</a> of file <a class="el" href="hal__mmc__spi_8c_source.html">hal_mmc_spi.c</a>.</p>

<p>References <a class="el" href="group___i_o___b_l_o_c_k.html#gga1f189b51767bd55ccc145f43b9a363b9a97b7a7ddb6b18c693d1f52e7163eed0f">BLK_READY</a>, <a class="el" href="group___i_o___b_l_o_c_k.html#gga1f189b51767bd55ccc145f43b9a363b9a081cbd0b13e70eced066b9465be782f5">BLK_WRITING</a>, <a class="el" href="struct_m_m_c_driver.html#aa26a6d1ed19b511139179a4c168f26e2">MMCDriver::config</a>, <a class="el" href="group___m_m_c_s_d.html#gace1da627ffbd5b8c176225f6e11bc13a">MMCSD_BLOCK_SIZE</a>, <a class="el" href="group___o_s_a_l.html#gadf56fc259582a041ae47bcabe5f49b00">osalDbgCheck</a>, <a class="el" href="group___s_p_i.html#ga43889a7d4c473f653596f8c0acafce2a">spiIgnore()</a>, <a class="el" href="struct_m_m_c_config.html#afa6149822441abfcb6ee6b92ec00072d">MMCConfig::spip</a>, <a class="el" href="group___s_p_i.html#gadd99ad823b391dde114f04dedafe5e80">spiReceive()</a>, <a class="el" href="group___s_p_i.html#ga382cfbdffd2df57cf3843d45164e8bfc">spiSend()</a>, <a class="el" href="group___s_p_i.html#gad3a359eea03e68e95899886ae93a06e4">spiStop()</a>, <a class="el" href="group___s_p_i.html#gae291c012872da9c89dec23581f701b5f">spiUnselect()</a>, and <a class="el" href="group___m_m_c___s_p_i.html#ga2047c3d4f7ce72dcb6c4942f57e92600">wait()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_m_c___s_p_i_ga76efb17f1cff7b0222356507e3002dec_cgraph.png" border="0" usemap="#group___m_m_c___s_p_i_ga76efb17f1cff7b0222356507e3002dec_cgraph" alt=""/></div>
<map name="group___m_m_c___s_p_i_ga76efb17f1cff7b0222356507e3002dec_cgraph" id="group___m_m_c___s_p_i_ga76efb17f1cff7b0222356507e3002dec_cgraph">
<area shape="rect" id="node2" href="group___s_p_i.html#ga43889a7d4c473f653596f8c0acafce2a" title="Ignores data on the SPI bus. " alt="" coords="267,5,334,29"/>
<area shape="rect" id="node6" href="group___s_p_i.html#gadd99ad823b391dde114f04dedafe5e80" title="Receives data from the SPI bus. " alt="" coords="264,53,337,77"/>
<area shape="rect" id="node7" href="group___s_p_i.html#ga382cfbdffd2df57cf3843d45164e8bfc" title="Sends data over the SPI bus. " alt="" coords="271,101,331,125"/>
<area shape="rect" id="node8" href="group___s_p_i.html#gad3a359eea03e68e95899886ae93a06e4" title="Deactivates the SPI peripheral. " alt="" coords="272,197,329,221"/>
<area shape="rect" id="node10" href="group___s_p_i.html#gae291c012872da9c89dec23581f701b5f" title="Deasserts the slave select signal. " alt="" coords="263,149,339,173"/>
<area shape="rect" id="node11" href="group___m_m_c___s_p_i.html#ga2047c3d4f7ce72dcb6c4942f57e92600" title="Waits an idle condition. " alt="" coords="173,52,215,76"/>
<area shape="rect" id="node3" href="group___o_s_a_l.html#ga0cb5e528b0114b4ca61c2eb65a0515fa" title="Enters a critical zone from thread context. " alt="" coords="409,101,489,125"/>
<area shape="rect" id="node4" href="group___o_s_a_l.html#ga49573c45ca88cd172ee03da252f69ae4" title="Sends the current thread sleeping and sets a reference variable. " alt="" coords="387,53,512,77"/>
<area shape="rect" id="node5" href="group___o_s_a_l.html#ga17dbf4a1761019b8d94f43832c506543" title="Leaves a critical zone from thread context. " alt="" coords="404,149,495,173"/>
<area shape="rect" id="node9" href="group___s_p_i.html#ga8d6b2e0764d39b892b51e6abe4923f80" title="Deactivates the SPI peripheral. " alt="" coords="411,197,488,221"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gac32c0ab56af0909733f7070eb6d549e9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mmcStopSequentialWrite </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *&#160;</td>
          <td class="paramname"><em>mmcp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stops a sequential write gracefully. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mmcp</td><td>pointer to the <code><a class="el" href="struct_m_m_c_driver.html" title="Structure representing a MMC/SD over SPI driver. ">MMCDriver</a></code> object</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL_SUCCESS</td><td>the operation succeeded. </td></tr>
    <tr><td class="paramname">HAL_FAILED</td><td>the operation failed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Normal API, this function can be invoked by regular system threads but not from within a lock zone. </dd></dl>

<p>Definition at line <a class="el" href="hal__mmc__spi_8c_source.html#l00796">796</a> of file <a class="el" href="hal__mmc__spi_8c_source.html">hal_mmc_spi.c</a>.</p>

<p>References <a class="el" href="group___i_o___b_l_o_c_k.html#gga1f189b51767bd55ccc145f43b9a363b9a97b7a7ddb6b18c693d1f52e7163eed0f">BLK_READY</a>, <a class="el" href="group___i_o___b_l_o_c_k.html#gga1f189b51767bd55ccc145f43b9a363b9a081cbd0b13e70eced066b9465be782f5">BLK_WRITING</a>, <a class="el" href="struct_m_m_c_driver.html#aa26a6d1ed19b511139179a4c168f26e2">MMCDriver::config</a>, <a class="el" href="group___o_s_a_l.html#gadf56fc259582a041ae47bcabe5f49b00">osalDbgCheck</a>, <a class="el" href="struct_m_m_c_config.html#afa6149822441abfcb6ee6b92ec00072d">MMCConfig::spip</a>, <a class="el" href="group___s_p_i.html#ga382cfbdffd2df57cf3843d45164e8bfc">spiSend()</a>, and <a class="el" href="group___s_p_i.html#gae291c012872da9c89dec23581f701b5f">spiUnselect()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_m_c___s_p_i_gac32c0ab56af0909733f7070eb6d549e9_cgraph.png" border="0" usemap="#group___m_m_c___s_p_i_gac32c0ab56af0909733f7070eb6d549e9_cgraph" alt=""/></div>
<map name="group___m_m_c___s_p_i_gac32c0ab56af0909733f7070eb6d549e9_cgraph" id="group___m_m_c___s_p_i_gac32c0ab56af0909733f7070eb6d549e9_cgraph">
<area shape="rect" id="node2" href="group___s_p_i.html#ga382cfbdffd2df57cf3843d45164e8bfc" title="Sends data over the SPI bus. " alt="" coords="204,53,264,77"/>
<area shape="rect" id="node6" href="group___s_p_i.html#gae291c012872da9c89dec23581f701b5f" title="Deasserts the slave select signal. " alt="" coords="196,5,272,29"/>
<area shape="rect" id="node3" href="group___o_s_a_l.html#ga0cb5e528b0114b4ca61c2eb65a0515fa" title="Enters a critical zone from thread context. " alt="" coords="343,53,423,77"/>
<area shape="rect" id="node4" href="group___o_s_a_l.html#ga49573c45ca88cd172ee03da252f69ae4" title="Sends the current thread sleeping and sets a reference variable. " alt="" coords="320,101,445,125"/>
<area shape="rect" id="node5" href="group___o_s_a_l.html#ga17dbf4a1761019b8d94f43832c506543" title="Leaves a critical zone from thread context. " alt="" coords="337,5,428,29"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga406d68dad8363c841cf80d43ab863dda"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mmcSync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *&#160;</td>
          <td class="paramname"><em>mmcp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Waits for card idle condition. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mmcp</td><td>pointer to the <code><a class="el" href="struct_m_m_c_driver.html" title="Structure representing a MMC/SD over SPI driver. ">MMCDriver</a></code> object</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL_SUCCESS</td><td>the operation succeeded. </td></tr>
    <tr><td class="paramname">HAL_FAILED</td><td>the operation failed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Normal API, this function can be invoked by regular system threads but not from within a lock zone. </dd></dl>

<p>Definition at line <a class="el" href="hal__mmc__spi_8c_source.html#l00824">824</a> of file <a class="el" href="hal__mmc__spi_8c_source.html">hal_mmc_spi.c</a>.</p>

<p>References <a class="el" href="group___i_o___b_l_o_c_k.html#gga1f189b51767bd55ccc145f43b9a363b9a97b7a7ddb6b18c693d1f52e7163eed0f">BLK_READY</a>, <a class="el" href="group___i_o___b_l_o_c_k.html#gga1f189b51767bd55ccc145f43b9a363b9ac8b6a64a1b2aac40bd452167cd9fdfbe">BLK_SYNCING</a>, <a class="el" href="struct_m_m_c_driver.html#aa26a6d1ed19b511139179a4c168f26e2">MMCDriver::config</a>, <a class="el" href="struct_m_m_c_config.html#ab104cbf423a64731175510b201ae9f95">MMCConfig::hscfg</a>, <a class="el" href="group___o_s_a_l.html#gadf56fc259582a041ae47bcabe5f49b00">osalDbgCheck</a>, <a class="el" href="struct_m_m_c_config.html#afa6149822441abfcb6ee6b92ec00072d">MMCConfig::spip</a>, <a class="el" href="group___s_p_i.html#ga6752c9f736f8de774a5bef6dfe2aae2e">spiStart()</a>, and <a class="el" href="group___m_m_c___s_p_i.html#gab09e4d4341eff30aadfbc5da9ec804e4">sync()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_m_c___s_p_i_ga406d68dad8363c841cf80d43ab863dda_cgraph.png" border="0" usemap="#group___m_m_c___s_p_i_ga406d68dad8363c841cf80d43ab863dda_cgraph" alt=""/></div>
<map name="group___m_m_c___s_p_i_ga406d68dad8363c841cf80d43ab863dda_cgraph" id="group___m_m_c___s_p_i_ga406d68dad8363c841cf80d43ab863dda_cgraph">
<area shape="rect" id="node2" href="group___s_p_i.html#ga6752c9f736f8de774a5bef6dfe2aae2e" title="Configures and activates the SPI peripheral. " alt="" coords="221,5,279,29"/>
<area shape="rect" id="node6" href="group___m_m_c___s_p_i.html#gab09e4d4341eff30aadfbc5da9ec804e4" title="Waits that the card reaches an idle state. " alt="" coords="121,89,164,113"/>
<area shape="rect" id="node3" href="group___o_s_a_l.html#ga0cb5e528b0114b4ca61c2eb65a0515fa" title="Enters a critical zone from thread context. " alt="" coords="341,101,421,125"/>
<area shape="rect" id="node4" href="group___s_p_i.html#gaf35495bd4459608ae22a3f728fd4697b" title="Configures and activates the SPI peripheral. " alt="" coords="342,5,421,29"/>
<area shape="rect" id="node5" href="group___o_s_a_l.html#ga17dbf4a1761019b8d94f43832c506543" title="Leaves a critical zone from thread context. " alt="" coords="336,53,427,77"/>
<area shape="rect" id="node7" href="group___s_p_i.html#gadd99ad823b391dde114f04dedafe5e80" title="Receives data from the SPI bus. " alt="" coords="213,53,287,77"/>
<area shape="rect" id="node8" href="group___s_p_i.html#ga00809152c869db80192aa3e04266a99a" title="Asserts the slave select signal and prepares for transfers. " alt="" coords="218,101,282,125"/>
<area shape="rect" id="node9" href="group___s_p_i.html#gae291c012872da9c89dec23581f701b5f" title="Deasserts the slave select signal. " alt="" coords="212,149,288,173"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga3335431326aae14670311c0b39fd4e1d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mmcGetInfo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *&#160;</td>
          <td class="paramname"><em>mmcp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_block_device_info.html">BlockDeviceInfo</a> *&#160;</td>
          <td class="paramname"><em>bdip</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the media info. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mmcp</td><td>pointer to the <code><a class="el" href="struct_m_m_c_driver.html" title="Structure representing a MMC/SD over SPI driver. ">MMCDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">bdip</td><td>pointer to a <code><a class="el" href="struct_block_device_info.html" title="Block device info. ">BlockDeviceInfo</a></code> structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL_SUCCESS</td><td>the operation succeeded. </td></tr>
    <tr><td class="paramname">HAL_FAILED</td><td>the operation failed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Normal API, this function can be invoked by regular system threads but not from within a lock zone. </dd></dl>

<p>Definition at line <a class="el" href="hal__mmc__spi_8c_source.html#l00855">855</a> of file <a class="el" href="hal__mmc__spi_8c_source.html">hal_mmc_spi.c</a>.</p>

<p>References <a class="el" href="struct_block_device_info.html#a6bbffadf25a22e3f96914463d321ab05">BlockDeviceInfo::blk_num</a>, <a class="el" href="group___i_o___b_l_o_c_k.html#gga1f189b51767bd55ccc145f43b9a363b9a97b7a7ddb6b18c693d1f52e7163eed0f">BLK_READY</a>, <a class="el" href="struct_block_device_info.html#a8b8c5b5f961c010967dc181e83db7a00">BlockDeviceInfo::blk_size</a>, <a class="el" href="group___m_m_c_s_d.html#gace1da627ffbd5b8c176225f6e11bc13a">MMCSD_BLOCK_SIZE</a>, and <a class="el" href="group___o_s_a_l.html#gadf56fc259582a041ae47bcabe5f49b00">osalDbgCheck</a>.</p>

</div>
</div>
<a class="anchor" id="gac1c3aed4f9a57cc60f9c65d5b78d2cd5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mmcErase </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_m_c_driver.html">MMCDriver</a> *&#160;</td>
          <td class="paramname"><em>mmcp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>startblk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>endblk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Erases blocks. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mmcp</td><td>pointer to the <code><a class="el" href="struct_m_m_c_driver.html" title="Structure representing a MMC/SD over SPI driver. ">MMCDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">startblk</td><td>starting block number </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">endblk</td><td>ending block number</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL_SUCCESS</td><td>the operation succeeded. </td></tr>
    <tr><td class="paramname">HAL_FAILED</td><td>the operation failed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:</dt><dd>Normal API, this function can be invoked by regular system threads but not from within a lock zone. </dd></dl>

<p>Definition at line <a class="el" href="hal__mmc__spi_8c_source.html#l00882">882</a> of file <a class="el" href="hal__mmc__spi_8c_source.html">hal_mmc_spi.c</a>.</p>

<p>References <a class="el" href="group___i_o___b_l_o_c_k.html#gga1f189b51767bd55ccc145f43b9a363b9a97b7a7ddb6b18c693d1f52e7163eed0f">BLK_READY</a>, <a class="el" href="group___i_o___b_l_o_c_k.html#gga1f189b51767bd55ccc145f43b9a363b9a081cbd0b13e70eced066b9465be782f5">BLK_WRITING</a>, <a class="el" href="struct_m_m_c_driver.html#aa26a6d1ed19b511139179a4c168f26e2">MMCDriver::config</a>, <a class="el" href="group___m_m_c_s_d.html#gace1da627ffbd5b8c176225f6e11bc13a">MMCSD_BLOCK_SIZE</a>, <a class="el" href="group___o_s_a_l.html#gadf56fc259582a041ae47bcabe5f49b00">osalDbgCheck</a>, <a class="el" href="group___m_m_c___s_p_i.html#gaf83dd60ca0bc01e456d965724b3f4a5a">send_command_R1()</a>, <a class="el" href="struct_m_m_c_config.html#afa6149822441abfcb6ee6b92ec00072d">MMCConfig::spip</a>, and <a class="el" href="group___s_p_i.html#gad3a359eea03e68e95899886ae93a06e4">spiStop()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_m_c___s_p_i_gac1c3aed4f9a57cc60f9c65d5b78d2cd5_cgraph.png" border="0" usemap="#group___m_m_c___s_p_i_gac1c3aed4f9a57cc60f9c65d5b78d2cd5_cgraph" alt=""/></div>
<map name="group___m_m_c___s_p_i_gac1c3aed4f9a57cc60f9c65d5b78d2cd5_cgraph" id="group___m_m_c___s_p_i_gac1c3aed4f9a57cc60f9c65d5b78d2cd5_cgraph">
<area shape="rect" id="node2" href="group___m_m_c___s_p_i.html#gaf83dd60ca0bc01e456d965724b3f4a5a" title="Sends a command an returns a single byte response. " alt="" coords="127,101,245,125"/>
<area shape="rect" id="node9" href="group___s_p_i.html#gad3a359eea03e68e95899886ae93a06e4" title="Deactivates the SPI peripheral. " alt="" coords="303,197,360,221"/>
<area shape="rect" id="node3" href="group___m_m_c___s_p_i.html#ga3862a084e567aa0e36d86038f504b7b5" title="Receives a single byte response. " alt="" coords="305,149,357,173"/>
<area shape="rect" id="node4" href="group___m_m_c___s_p_i.html#ga9e3bc1849600a89d28eac5aaa8e5ea14" title="Sends a command header. " alt="" coords="298,5,365,29"/>
<area shape="rect" id="node5" href="group___s_p_i.html#ga00809152c869db80192aa3e04266a99a" title="Asserts the slave select signal and prepares for transfers. " alt="" coords="299,101,363,125"/>
<area shape="rect" id="node8" href="group___s_p_i.html#gae291c012872da9c89dec23581f701b5f" title="Deasserts the slave select signal. " alt="" coords="293,53,369,77"/>
<area shape="rect" id="node6" href="group___o_s_a_l.html#ga0cb5e528b0114b4ca61c2eb65a0515fa" title="Enters a critical zone from thread context. " alt="" coords="423,125,503,149"/>
<area shape="rect" id="node7" href="group___o_s_a_l.html#ga17dbf4a1761019b8d94f43832c506543" title="Leaves a critical zone from thread context. " alt="" coords="417,77,508,101"/>
<area shape="rect" id="node10" href="group___s_p_i.html#ga8d6b2e0764d39b892b51e6abe4923f80" title="Deactivates the SPI peripheral. " alt="" coords="424,197,501,221"/>
</map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ga99f29fc5df8d087e9de16b2c98ee55b0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="struct_m_m_c_driver_v_m_t.html">MMCDriverVMT</a> mmc_vmt</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">  (bool (*)(<span class="keywordtype">void</span> *))mmc_lld_is_card_inserted,</div><div class="line">  (bool (*)(<span class="keywordtype">void</span> *))mmc_lld_is_write_protected,</div><div class="line">  (<span class="keywordtype">bool</span> (*)(<span class="keywordtype">void</span> *))<a class="code" href="group___m_m_c___s_p_i.html#gaf0bcf9f5d4e2ec9854101905c81145fb">mmcConnect</a>,</div><div class="line">  (<span class="keywordtype">bool</span> (*)(<span class="keywordtype">void</span> *))<a class="code" href="group___m_m_c___s_p_i.html#ga20a509767690b2699f93822c85410ae6">mmcDisconnect</a>,</div><div class="line">  mmc_read,</div><div class="line">  mmc_write,</div><div class="line">  (<span class="keywordtype">bool</span> (*)(<span class="keywordtype">void</span> *))<a class="code" href="group___m_m_c___s_p_i.html#ga406d68dad8363c841cf80d43ab863dda">mmcSync</a>,</div><div class="line">  (<span class="keywordtype">bool</span> (*)(<span class="keywordtype">void</span> *, <a class="code" href="struct_block_device_info.html">BlockDeviceInfo</a> *))<a class="code" href="group___m_m_c___s_p_i.html#ga3335431326aae14670311c0b39fd4e1d">mmcGetInfo</a></div><div class="line">}</div><div class="ttc" id="group___m_m_c___s_p_i_html_gaf0bcf9f5d4e2ec9854101905c81145fb"><div class="ttname"><a href="group___m_m_c___s_p_i.html#gaf0bcf9f5d4e2ec9854101905c81145fb">mmcConnect</a></div><div class="ttdeci">bool mmcConnect(MMCDriver *mmcp)</div><div class="ttdoc">Performs the initialization procedure on the inserted card. </div><div class="ttdef"><b>Definition:</b> <a href="hal__mmc__spi_8c_source.html#l00454">hal_mmc_spi.c:454</a></div></div>
<div class="ttc" id="group___m_m_c___s_p_i_html_ga3335431326aae14670311c0b39fd4e1d"><div class="ttname"><a href="group___m_m_c___s_p_i.html#ga3335431326aae14670311c0b39fd4e1d">mmcGetInfo</a></div><div class="ttdeci">bool mmcGetInfo(MMCDriver *mmcp, BlockDeviceInfo *bdip)</div><div class="ttdoc">Returns the media info. </div><div class="ttdef"><b>Definition:</b> <a href="hal__mmc__spi_8c_source.html#l00855">hal_mmc_spi.c:855</a></div></div>
<div class="ttc" id="group___m_m_c___s_p_i_html_ga406d68dad8363c841cf80d43ab863dda"><div class="ttname"><a href="group___m_m_c___s_p_i.html#ga406d68dad8363c841cf80d43ab863dda">mmcSync</a></div><div class="ttdeci">bool mmcSync(MMCDriver *mmcp)</div><div class="ttdoc">Waits for card idle condition. </div><div class="ttdef"><b>Definition:</b> <a href="hal__mmc__spi_8c_source.html#l00824">hal_mmc_spi.c:824</a></div></div>
<div class="ttc" id="struct_block_device_info_html"><div class="ttname"><a href="struct_block_device_info.html">BlockDeviceInfo</a></div><div class="ttdoc">Block device info. </div><div class="ttdef"><b>Definition:</b> <a href="hal__ioblock_8h_source.html#l00055">hal_ioblock.h:55</a></div></div>
<div class="ttc" id="group___m_m_c___s_p_i_html_ga20a509767690b2699f93822c85410ae6"><div class="ttname"><a href="group___m_m_c___s_p_i.html#ga20a509767690b2699f93822c85410ae6">mmcDisconnect</a></div><div class="ttdeci">bool mmcDisconnect(MMCDriver *mmcp)</div><div class="ttdoc">Brings the driver in a state safe for card removal. </div><div class="ttdef"><b>Definition:</b> <a href="hal__mmc__spi_8c_source.html#l00576">hal_mmc_spi.c:576</a></div></div>
</div><!-- fragment -->
<p>Virtual methods table. </p>

<p>Definition at line <a class="el" href="hal__mmc__spi_8c_source.html#l00055">55</a> of file <a class="el" href="hal__mmc__spi_8c_source.html">hal_mmc_spi.c</a>.</p>

<p>Referenced by <a class="el" href="group___m_m_c___s_p_i.html#gaae45b6a15227c9946e4d16820cc2dc09">mmcObjectInit()</a>.</p>

</div>
</div>
<a class="anchor" id="ga645ff497f0bb9c265d939b2cd6d1e5c2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t crc7_lookup_table[256]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">  0x00, 0x09, 0x12, 0x1b, 0x24, 0x2d, 0x36, 0x3f, 0x48, 0x41, 0x5a, 0x53,</div><div class="line">  0x6c, 0x65, 0x7e, 0x77, 0x19, 0x10, 0x0b, 0x02, 0x3d, 0x34, 0x2f, 0x26,</div><div class="line">  0x51, 0x58, 0x43, 0x4a, 0x75, 0x7c, 0x67, 0x6e, 0x32, 0x3b, 0x20, 0x29,</div><div class="line">  0x16, 0x1f, 0x04, 0x0d, 0x7a, 0x73, 0x68, 0x61, 0x5e, 0x57, 0x4c, 0x45,</div><div class="line">  0x2b, 0x22, 0x39, 0x30, 0x0f, 0x06, 0x1d, 0x14, 0x63, 0x6a, 0x71, 0x78,</div><div class="line">  0x47, 0x4e, 0x55, 0x5c, 0x64, 0x6d, 0x76, 0x7f, 0x40, 0x49, 0x52, 0x5b,</div><div class="line">  0x2c, 0x25, 0x3e, 0x37, 0x08, 0x01, 0x1a, 0x13, 0x7d, 0x74, 0x6f, 0x66,</div><div class="line">  0x59, 0x50, 0x4b, 0x42, 0x35, 0x3c, 0x27, 0x2e, 0x11, 0x18, 0x03, 0x0a,</div><div class="line">  0x56, 0x5f, 0x44, 0x4d, 0x72, 0x7b, 0x60, 0x69, 0x1e, 0x17, 0x0c, 0x05,</div><div class="line">  0x3a, 0x33, 0x28, 0x21, 0x4f, 0x46, 0x5d, 0x54, 0x6b, 0x62, 0x79, 0x70,</div><div class="line">  0x07, 0x0e, 0x15, 0x1c, 0x23, 0x2a, 0x31, 0x38, 0x41, 0x48, 0x53, 0x5a,</div><div class="line">  0x65, 0x6c, 0x77, 0x7e, 0x09, 0x00, 0x1b, 0x12, 0x2d, 0x24, 0x3f, 0x36,</div><div class="line">  0x58, 0x51, 0x4a, 0x43, 0x7c, 0x75, 0x6e, 0x67, 0x10, 0x19, 0x02, 0x0b,</div><div class="line">  0x34, 0x3d, 0x26, 0x2f, 0x73, 0x7a, 0x61, 0x68, 0x57, 0x5e, 0x45, 0x4c,</div><div class="line">  0x3b, 0x32, 0x29, 0x20, 0x1f, 0x16, 0x0d, 0x04, 0x6a, 0x63, 0x78, 0x71,</div><div class="line">  0x4e, 0x47, 0x5c, 0x55, 0x22, 0x2b, 0x30, 0x39, 0x06, 0x0f, 0x14, 0x1d,</div><div class="line">  0x25, 0x2c, 0x37, 0x3e, 0x01, 0x08, 0x13, 0x1a, 0x6d, 0x64, 0x7f, 0x76,</div><div class="line">  0x49, 0x40, 0x5b, 0x52, 0x3c, 0x35, 0x2e, 0x27, 0x18, 0x11, 0x0a, 0x03,</div><div class="line">  0x74, 0x7d, 0x66, 0x6f, 0x50, 0x59, 0x42, 0x4b, 0x17, 0x1e, 0x05, 0x0c,</div><div class="line">  0x33, 0x3a, 0x21, 0x28, 0x5f, 0x56, 0x4d, 0x44, 0x7b, 0x72, 0x69, 0x60,</div><div class="line">  0x0e, 0x07, 0x1c, 0x15, 0x2a, 0x23, 0x38, 0x31, 0x46, 0x4f, 0x54, 0x5d,</div><div class="line">  0x62, 0x6b, 0x70, 0x79</div><div class="line">}</div></div><!-- fragment -->
<p>Lookup table for CRC-7 ( based on polynomial x^7 + x^3 + 1). </p>

<p>Definition at line <a class="el" href="hal__mmc__spi_8c_source.html#l00069">69</a> of file <a class="el" href="hal__mmc__spi_8c_source.html">hal_mmc_spi.c</a>.</p>

<p>Referenced by <a class="el" href="group___m_m_c___s_p_i.html#gac82b7e209601c890c0d1587cefaf0813">crc7()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sun May 13 2018 00:51:42 for ChibiOS/HAL by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
